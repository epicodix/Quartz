---
title: PVC ìƒì„± (ê°œë°œì)
summary: ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ì²˜ìŒì—ëŠ” ì‚¬ìš©ìê°€ 100ëª…ì´ì—ˆì§€ë§Œ, ê°‘ìê¸° 10ë§Œ ëª…ìœ¼ë¡œ ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤. ì„œë²„ í•œ ëŒ€ë¡œëŠ” ê°ë‹¹ì´
  ì•ˆ ë˜ì£ . ì„œë²„ë¥¼ 10ëŒ€, 100ëŒ€ë¡œ ëŠ˜ë ¤ì•¼ í•˜ëŠ”ë°, ì´ê±¸ ì–´ë–»ê²Œ ê´€ë¦¬í• ê¹Œìš”? ë°”ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ **ì¿ ë²„ë„¤í‹°ìŠ¤(Kuberne...
tags:
- ë¯¸ë¶„ë¥˜
category: ê°€ì´ë“œ
difficulty: ì¤‘ê¸‰
estimated_time: 30ë¶„
created: '2025-11-03'
updated: '2025-11-08'
---

## ë“¤ì–´ê°€ë©°: ì™œ ì¿ ë²„ë„¤í‹°ìŠ¤ì¸ê°€?

ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ì²˜ìŒì—ëŠ” ì‚¬ìš©ìê°€ 100ëª…ì´ì—ˆì§€ë§Œ, ê°‘ìê¸° 10ë§Œ ëª…ìœ¼ë¡œ ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤. ì„œë²„ í•œ ëŒ€ë¡œëŠ” ê°ë‹¹ì´ ì•ˆ ë˜ì£ . ì„œë²„ë¥¼ 10ëŒ€, 100ëŒ€ë¡œ ëŠ˜ë ¤ì•¼ í•˜ëŠ”ë°, ì´ê±¸ ì–´ë–»ê²Œ ê´€ë¦¬í• ê¹Œìš”? ë°”ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ **ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes, K8s)** ì…ë‹ˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™ìœ¼ë¡œ ë°°í¬í•˜ê³ , í™•ì¥í•˜ê³ , ê´€ë¦¬í•´ì£¼ëŠ” **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼**ì…ë‹ˆë‹¤. êµ¬ê¸€ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ë˜ Borg ì‹œìŠ¤í…œì„ ì˜¤í”ˆì†ŒìŠ¤í™”í•œ ê²ƒìœ¼ë¡œ, í˜„ì¬ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ìƒíƒœê³„ì˜ ì‚¬ì‹¤ìƒ í‘œì¤€(de facto standard)ì…ë‹ˆë‹¤.

## ğŸ“¦ 1ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ì´í•´í•˜ê¸°

### ì»¨í…Œì´ë„ˆë€?

ì»¨í…Œì´ë„ˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê·¸ ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë“  ê²ƒ(ë¼ì´ë¸ŒëŸ¬ë¦¬, ì„¤ì • íŒŒì¼ ë“±)ì„ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ë¡œ ë¬¶ì€ ê²ƒì…ë‹ˆë‹¤.

**ë¹„ìœ :** ì»¨í…Œì´ë„ˆëŠ” ì´ì‚¬ ê°ˆ ë•Œ ì“°ëŠ” ë°•ìŠ¤ì™€ ê°™ìŠµë‹ˆë‹¤. ë°•ìŠ¤ ì•ˆì— ë¬¼ê±´ì„ ë‹´ì•„ë‘ë©´, ì–´ë–¤ ì§‘(ì„œë²„)ìœ¼ë¡œ ì˜®ê¸°ë“  ë˜‘ê°™ì´ ì‘ë™í•©ë‹ˆë‹¤.

**ê°€ìƒë¨¸ì‹ (VM) vs ì»¨í…Œì´ë„ˆ:**

- VM: ê°ì ë…ë¦½ëœ OSë¥¼ ê°€ì§€ê³  ìˆì–´ ë¬´ê²ê³  ëŠë¦¼ (ì§‘ì„ í†µì§¸ë¡œ ì˜®ê¸°ëŠ” ê²ƒ)
- ì»¨í…Œì´ë„ˆ: OS ì»¤ë„ì„ ê³µìœ í•˜ì—¬ ê°€ë³ê³  ë¹ ë¦„ (í•„ìš”í•œ ë¬¼ê±´ë§Œ ë‹´ì€ ë°•ìŠ¤)

### Dockerì™€ì˜ ê´€ê³„

DockerëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì´ëŸ° ì»¨í…Œì´ë„ˆë“¤ì„ ëŒ€ê·œëª¨ë¡œ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì£ .

**ë”¥ë¨¹ ì£¼ì œ:**

- Docker ì´ë¯¸ì§€ ë ˆì´ì–´ êµ¬ì¡°ì™€ ìµœì í™” ê¸°ë²•
- Container Runtime Interface (CRI): Docker, containerd, CRI-O ë¹„êµ
- OCI (Open Container Initiative) í‘œì¤€
- Multi-stage buildë¥¼ í†µí•œ ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”

---

## ğŸ¯ 2ë‹¨ê³„: íŒŒë“œ(Pod) - ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìµœì†Œ ë‹¨ìœ„

### íŒŒë“œë€?

íŒŒë“œëŠ” **í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ë¬¶ì€ ê·¸ë£¹**ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë°°í¬í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì£ .

**ì™œ ì»¨í…Œì´ë„ˆê°€ ì•„ë‹ˆë¼ íŒŒë“œë¥¼ ë‹¨ìœ„ë¡œ ì“¸ê¹Œ?**

ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ í˜‘ë ¥í•´ì„œ ë™ì‘í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

- ë©”ì¸ ì›¹ ì„œë²„ ì»¨í…Œì´ë„ˆ
- ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆ
- ì„¤ì • íŒŒì¼ì„ ë™ê¸°í™”í•˜ëŠ” ì–´ëŒ‘í„° ì»¨í…Œì´ë„ˆ

ì´ëŸ° ì»¨í…Œì´ë„ˆë“¤ì€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ì™€ ìŠ¤í† ë¦¬ì§€ë¥¼ ê³µìœ í•´ì•¼ í•˜ëŠ”ë°, íŒŒë“œê°€ ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

**íŒŒë“œì˜ íŠ¹ì§•:**

- íŒŒë“œ ë‚´ ì»¨í…Œì´ë„ˆë“¤ì€ localhostë¡œ í†µì‹  ê°€ëŠ¥ (ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
- íŒŒë“œëŠ” í•˜ë‚˜ì˜ IP ì£¼ì†Œë¥¼ ê³µìœ 
- íŒŒë“œëŠ” ì„ì‹œì (ephemeral) - ì–¸ì œë“  ì‚­ì œë˜ê³  ì¬ìƒì„±ë  ìˆ˜ ìˆìŒ

```
apiVersion: v1
kind: Pod
metadata:
  name: my-app-pod
spec:
  containers:
  - name: web-server
    image: nginx:1.21
    ports:
    - containerPort: 80
  - name: log-collector
    image: fluentd:v1.14
```

**ë”¥ë¨¹ ì£¼ì œ:**
- íŒŒë“œì˜ ë¼ì´í”„ì‚¬ì´í´ê³¼ ìƒíƒœ(Pending, Running, Succeeded, Failed)
- Init ì»¨í…Œì´ë„ˆì™€ ì‚¬ì´ë“œì¹´ íŒ¨í„´
- íŒŒë“œ ë„¤íŠ¸ì›Œí‚¹: CNI(Container Network Interface) í”ŒëŸ¬ê·¸ì¸
- íŒŒë“œ ê°„ í†µì‹ : Service Mesh (Istio, Linkerd)
- íŒŒë“œ ìŠ¤ì¼€ì¤„ë§: Node Affinity, Taints and Tolerations
- ë¦¬ì†ŒìŠ¤ QoS í´ë˜ìŠ¤: Guaranteed, Burstable, BestEffort

---




## ğŸ® 3ë‹¨ê³„: ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment) - ì„ ì–¸ì  ë°°í¬ ê´€ë¦¬

### ë””í”Œë¡œì´ë¨¼íŠ¸ë€?

ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” **íŒŒë“œë¥¼ ê´€ë¦¬í•˜ëŠ” ìƒìœ„ ì»¨íŠ¸ë¡¤ëŸ¬**ì…ë‹ˆë‹¤. "ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŒŒë“œë¥¼ 3ê°œ ìœ ì§€í•´ì¤˜"ë¼ê³  ì„ ì–¸í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì´ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

**í•µì‹¬ ê°œë…: ì„ ì–¸ì (Declarative) ê´€ë¦¬**

ì „í†µì  ë°©ì‹(ëª…ë ¹í˜•):

1. ì„œë²„ Aì— ì ‘ì†
2. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜
3. ì„œë²„ Bì— ì ‘ì†
4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜
5. ...

ì¿ ë²„ë„¤í‹°ìŠ¤ ë°©ì‹(ì„ ì–¸ì ):


```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-web-app
spec:
  replicas: 3  # "íŒŒë“œ 3ê°œë¥¼ ì›í•´"
  selector:
    matchLabels:
      app: web
  template:
    metadata:
      labels:
        app: web
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        resources:
          requests:
            memory: "128Mi"
            cpu: "250m"
          limits:
            memory: "256Mi"
            cpu: "500m"
```

"íŒŒë“œ 3ê°œ"ë¼ê³  ì„ ì–¸í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì•Œì•„ì„œ:

- íŒŒë“œê°€ ì£½ìœ¼ë©´ ìë™ìœ¼ë¡œ ì¬ì‹œì‘
- ë…¸ë“œê°€ ë‹¤ìš´ë˜ë©´ ë‹¤ë¥¸ ë…¸ë“œì— íŒŒë“œ ì¬ë°°ì¹˜
- íŠ¸ë˜í”½ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìŠ¤ì¼€ì¼ë§ (HPA ì‚¬ìš© ì‹œ)

### ë¡¤ë§ ì—…ë°ì´íŠ¸ì™€ ë¡¤ë°±

ìƒˆ ë²„ì „ ë°°í¬ ì‹œ, í•œ ë²ˆì— ëª¨ë“  íŒŒë“œë¥¼ êµì²´í•˜ë©´ ì„œë¹„ìŠ¤ ë‹¤ìš´íƒ€ì„ì´ ë°œìƒí•©ë‹ˆë‹¤. ë””í”Œë¡œì´ë¨¼íŠ¸ëŠ” **ì ì§„ì ìœ¼ë¡œ** íŒŒë“œë¥¼ êµì²´í•©ë‹ˆë‹¤.


```yaml
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1  # ìµœëŒ€ 1ê°œê¹Œì§€ ë™ì‹œì— ì£½ì¼ ìˆ˜ ìˆìŒ
      maxSurge: 1        # ìµœëŒ€ 1ê°œê¹Œì§€ ì¶”ê°€ë¡œ ìƒì„± ê°€ëŠ¥
```

**í”„ë¡œì„¸ìŠ¤:**

1. ìƒˆ ë²„ì „ íŒŒë“œ 1ê°œ ìƒì„±
2. ì¤€ë¹„ë˜ë©´ ì´ì „ ë²„ì „ íŒŒë“œ 1ê°œ ì¢…ë£Œ
3. ë°˜ë³µ...

ë¬¸ì œê°€ ìƒê¸°ë©´ ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë¡¤ë°±:

bash

```bash
kubectl rollout undo deployment/my-web-app
```

**ë”¥ë¨¹ ì£¼ì œ:**

- ReplicaSetì˜ ì—­í• ê³¼ ë””í”Œë¡œì´ë¨¼íŠ¸ì™€ì˜ ê´€ê³„
- Blue-Green ë°°í¬, Canary ë°°í¬ ì „ëµ
- StatefulSet: ìƒíƒœë¥¼ ê°€ì§„ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë¦¬ (ë°ì´í„°ë² ì´ìŠ¤ ë“±)
- DaemonSet: ëª¨ë“  ë…¸ë“œì— íŒŒë“œ ë°°í¬ (ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ ë“±)
- Jobê³¼ CronJob: ë°°ì¹˜ ì‘ì—… ê´€ë¦¬
- Horizontal Pod Autoscaler (HPA)ì™€ Vertical Pod Autoscaler (VPA)
- Cluster Autoscaler: ë…¸ë“œ ìë™ í™•ì¥

---

## ğŸŒ 4ë‹¨ê³„: ì„œë¹„ìŠ¤(Service) - ë„¤íŠ¸ì›Œí‚¹ì˜ í•µì‹¬

### ë¬¸ì œ ìƒí™©

íŒŒë“œëŠ” ìƒì„±/ì‚­ì œë  ë•Œë§ˆë‹¤ IPê°€ ë°”ë€ë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œê°€ ë°±ì—”ë“œ íŒŒë“œì— ì ‘ì†í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?

### ì„œë¹„ìŠ¤ë€?

ì„œë¹„ìŠ¤ëŠ” **íŒŒë“œë“¤ì˜ ê³ ì •ëœ ì§„ì…ì **ì„ ì œê³µí•©ë‹ˆë‹¤. ë¡œë“œë°¸ëŸ°ì„œ ì—­í• ë„ í•˜ì£ .

**ì„œë¹„ìŠ¤ íƒ€ì…:**

1. **ClusterIP (ê¸°ë³¸ê°’)**: í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥

yaml

```yaml
apiVersion: v1
kind: Service
metadata:
  name: backend-service
spec:
  type: ClusterIP
  selector:
    app: backend  # ì´ ë¼ë²¨ì„ ê°€ì§„ íŒŒë“œë“¤ì—ê²Œ íŠ¸ë˜í”½ ì „ë‹¬
  ports:
  - port: 80
    targetPort: 8080
```

2. **NodePort**: ëª¨ë“  ë…¸ë“œì˜ íŠ¹ì • í¬íŠ¸ë¡œ ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥

yaml

```yaml
spec:
  type: NodePort
  ports:
  - port: 80
    targetPort: 8080
    nodePort: 30000  # 30000-32767 ë²”ìœ„
```

3. **LoadBalancer**: í´ë¼ìš°ë“œ ë¡œë“œë°¸ëŸ°ì„œ ìë™ ìƒì„± (AWS ELB, GCP LB ë“±)


```yaml
spec:
  type: LoadBalancer
  ports:
  - port: 80
    targetPort: 8080
```

4. **ExternalName**: ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ DNS alias

### Ingress: ê³ ê¸‰ ë¼ìš°íŒ…

IngressëŠ” HTTP/HTTPS íŠ¸ë˜í”½ì„ ìœ„í•œ **7ê³„ì¸µ ë¡œë“œë°¸ëŸ°ì‹±**ì„ ì œê³µí•©ë‹ˆë‹¤.


```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
spec:
  rules:
  - host: myapp.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: backend-service
            port:
              number: 80
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend-service
            port:
              number: 80
```

**ë”¥ë¨¹ ì£¼ì œ:**

- kube-proxyì˜ ë™ì‘ ì›ë¦¬: iptables vs IPVS ëª¨ë“œ
- CoreDNSì™€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
- Headless Serviceì™€ StatefulSet
- Ingress Controller ë¹„êµ: NGINX, Traefik, HAProxy, Contour
- Service Mesh: Istio, Linkerdë¥¼ í†µí•œ ê³ ê¸‰ íŠ¸ë˜í”½ ê´€ë¦¬
- Network Policy: íŒŒë“œ ê°„ í†µì‹  ì œì–´
- CNI í”ŒëŸ¬ê·¸ì¸: Calico, Flannel, Weave, Cilium

## ğŸ’¾ 5ë‹¨ê³„: ë³¼ë¥¨(Volume) - ë°ì´í„° ì˜ì†ì„±

### ë¬¸ì œ ìƒí™©

íŒŒë“œëŠ” ì–¸ì œë“  ì¬ì‹œì‘ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì €ì¥í•œ ë°ì´í„°ëŠ” ì‚¬ë¼ì§€ì£ . ë°ì´í„°ë² ì´ìŠ¤ë‚˜ íŒŒì¼ ì €ì¥ì´ í•„ìš”í•˜ë‹¤ë©´?

### ë³¼ë¥¨ì˜ ì¢…ë¥˜

**1. emptyDir**: íŒŒë“œê°€ ì‚´ì•„ìˆëŠ” ë™ì•ˆë§Œ ìœ ì§€ë˜ëŠ” ì„ì‹œ ë³¼ë¥¨


```yaml
spec:
  containers:
  - name: app
    volumeMounts:
    - name: cache
      mountPath: /cache
  volumes:
  - name: cache
    emptyDir: {}
```

**ìš©ë„:** ì„ì‹œ ìºì‹œ, ì»¨í…Œì´ë„ˆ ê°„ ë°ì´í„° ê³µìœ 

**2. hostPath**: ë…¸ë“œì˜ íŒŒì¼ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸


```yaml
volumes:
- name: logs
  hostPath:
    path: /var/log/myapp
    type: Directory
```

**ì£¼ì˜:** íŒŒë“œê°€ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì˜®ê²¨ê°€ë©´ ë°ì´í„° ì ‘ê·¼ ë¶ˆê°€

**3. PersistentVolume (PV)ì™€ PersistentVolumeClaim (PVC)**

ì§„ì§œ ì˜ì†ì ì¸ ìŠ¤í† ë¦¬ì§€ë¥¼ ìœ„í•œ ë°©ë²•ì…ë‹ˆë‹¤.

**ê°œë… ë¶„ë¦¬:**

- **PV**: ì‹¤ì œ ìŠ¤í† ë¦¬ì§€ (ê´€ë¦¬ìê°€ ìƒì„±)
- **PVC**: ìŠ¤í† ë¦¬ì§€ ìš”ì²­ (ê°œë°œìê°€ ìƒì„±)


```yaml
# PVC ìƒì„± (ê°œë°œì)
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: database-pvc
spec:
  accessModes:
    - ReadWriteOnce  # í•œ ë²ˆì— í•˜ë‚˜ì˜ ë…¸ë“œë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
  resources:
    requests:
      storage: 10Gi
  storageClassName: fast-ssd

---
# íŒŒë“œì—ì„œ ì‚¬ìš©
spec:
  containers:
  - name: postgres
    volumeMounts:
    - name: db-storage
      mountPath: /var/lib/postgresql/data
  volumes:
  - name: db-storage
    persistentVolumeClaim:
      claimName: database-pvc
```

**StorageClass**: ë™ì  í”„ë¡œë¹„ì €ë‹

yaml

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-ssd
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
  iopsPerGB: "50"
```

**ë”¥ë¨¹ ì£¼ì œ:**

- Volume Plugin: CSI (Container Storage Interface)
- AccessMode ìƒì„¸: RWO, ROX, RWX
- StatefulSetê³¼ VolumeClaimTemplate
- Snapshotê³¼ í´ë¡ 
- ìŠ¤í† ë¦¬ì§€ ë²¤ë” ë¹„êµ: AWS EBS, GCE PD, Azure Disk, Ceph, GlusterFS
- Local Persistent Volumeê³¼ ë…¸ë“œ ì¹œí™”ì„±
- Volume expansionê³¼ ì œì•½ì‚¬í•­

---

## ğŸ” 6ë‹¨ê³„: ConfigMap & Secret - ì„¤ì •ê³¼ ë¯¼ê° ì •ë³´ ê´€ë¦¬

### ConfigMap: ì„¤ì • ë°ì´í„°

ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ì½”ë“œì™€ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ 12-Factor Appì˜ ê¸°ë³¸ ì›ì¹™ì…ë‹ˆë‹¤.



```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database_host: "postgres.default.svc.cluster.local"
  database_port: "5432"
  log_level: "INFO"
  config.json: |
    {
      "feature_flags": {
        "new_ui": true
      }
    }
```

**ì‚¬ìš© ë°©ë²•:**

1. **í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…**


```yaml
spec:
  containers:
  - name: app
    env:
    - name: DB_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database_host
```

2. **ì „ì²´ë¥¼ í™˜ê²½ ë³€ìˆ˜ë¡œ**


```yaml
envFrom:
- configMapRef:
    name: app-config
```

3. **íŒŒì¼ë¡œ ë§ˆìš´íŠ¸**


```yaml
volumeMounts:
- name: config
  mountPath: /etc/config
volumes:
- name: config
  configMap:
    name: app-config
```

### Secret: ë¯¼ê°í•œ ì •ë³´

Secretì€ ConfigMapê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, **base64ë¡œ ì¸ì½”ë”©**ë˜ê³  ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.


```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
type: Opaque
data:
  username: YWRtaW4=  # adminì„ base64 ì¸ì½”ë”©
  password: cGFzc3dvcmQxMjM=  # password123
```

**ë” ì•ˆì „í•˜ê²Œ:**


```bash
kubectl create secret generic db-credentials \
  --from-literal=username=admin \
  --from-literal=password=password123
```

**ì‚¬ìš©:**


```yaml
spec:
  containers:
  - name: app
    env:
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-credentials
          key: password
```

**ì£¼ì˜ì‚¬í•­:**

- Secretì€ base64ì¼ ë¿, ì•”í˜¸í™”ê°€ ì•„ë‹™ë‹ˆë‹¤!
- etcd ì•”í˜¸í™”ë¥¼ ë°˜ë“œì‹œ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤
- RBACë¡œ ì ‘ê·¼ ì œì–´ í•„ìˆ˜

**ë”¥ë¨¹ ì£¼ì œ:**

- etcd ì•”í˜¸í™” ì„¤ì • (encryption-at-rest)
- External Secrets Operator: AWS Secrets Manager, HashiCorp Vault ì—°ë™
- Sealed Secrets: GitOpsë¥¼ ìœ„í•œ ì•”í˜¸í™”ëœ Secret
- Secret ìë™ ë¡œí…Œì´ì…˜
- Image Pull Secretê³¼ Private Registry ì—°ë™
- Service Account Tokenê³¼ IRSA (AWS), Workload Identity (GCP)

---

## ğŸ›ï¸ 7ë‹¨ê³„: ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Namespace) - ë¦¬ì†ŒìŠ¤ ê²©ë¦¬
### ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë€?

ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” **ê°€ìƒì˜ í´ëŸ¬ìŠ¤í„°**ë¥¼ ë§Œë“œëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  í´ëŸ¬ìŠ¤í„°ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„í• í•©ë‹ˆë‹¤.

**ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤:**

- `default`: ê¸°ë³¸ ì‘ì—… ê³µê°„
- `kube-system`: ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸
- `kube-public`: ëª¨ë‘ì—ê²Œ ê³µê°œë˜ëŠ” ë¦¬ì†ŒìŠ¤
- `kube-node-lease`: ë…¸ë“œ í•˜íŠ¸ë¹„íŠ¸ ì •ë³´

**ì‚¬ìš© ì‚¬ë¡€:**

- í™˜ê²½ ë¶„ë¦¬: dev, staging, production
- íŒ€ ë¶„ë¦¬: team-a, team-b
- í”„ë¡œì íŠ¸ ë¶„ë¦¬: project-x, project-y


```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: development
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
  namespace: development  # ì´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìƒì„±
```

**ë¦¬ì†ŒìŠ¤ ì¿¼í„° ì„¤ì •:**


```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: dev-quota
  namespace: development
spec:
  hard:
    requests.cpu: "10"
    requests.memory: 20Gi
    persistentvolumeclaims: "5"
    pods: "50"
```

**ë”¥ë¨¹ ì£¼ì œ:**

- LimitRange: ê°œë³„ íŒŒë“œ/ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì œí•œ
- Network Policyë¥¼ í†µí•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê°„ ê²©ë¦¬
- RBACì™€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬
- Multi-tenancy ì•„í‚¤í…ì²˜ íŒ¨í„´
- Hierarchical Namespace Controller (HNC)

---

## ğŸ—ï¸ ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜: ë‚´ë¶€ ë™ì‘ ì›ë¦¬

### Control Plane (ë§ˆìŠ¤í„° ë…¸ë“œ)

**1. API Server (kube-apiserver)**

- ëª¨ë“  ìš”ì²­ì˜ ì§„ì…ì 
- RESTful API ì œê³µ
- ì¸ì¦, ì¸ê°€, Admission Control ìˆ˜í–‰
- etcdì™€ ìœ ì¼í•˜ê²Œ í†µì‹ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸

**2. etcd**

- ë¶„ì‚° í‚¤-ë°¸ë¥˜ ì €ì¥ì†Œ
- í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ìƒíƒœ ì •ë³´ ì €ì¥
- Raft ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

**3. Scheduler (kube-scheduler)**

- íŒŒë“œë¥¼ ì–´ëŠ ë…¸ë“œì— ë°°ì¹˜í• ì§€ ê²°ì •
- ë¦¬ì†ŒìŠ¤, Affinity, Taints ë“± ê³ ë ¤
- ì‹¤ì œ ë°°ì¹˜ëŠ” kubeletì´ ìˆ˜í–‰

**4. Controller Manager (kube-controller-manager)**

- ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì˜ ì§‘í•©
- Deployment Controller, ReplicaSet Controller, Node Controller ë“±
- ì„ ì–¸ëœ ìƒíƒœ(desired state)ì™€ í˜„ì¬ ìƒíƒœ(current state)ë¥¼ ì§€ì†ì ìœ¼ë¡œ ë¹„êµí•˜ì—¬ ì¡°ì •

**5. Cloud Controller Manager**

- í´ë¼ìš°ë“œ ì œê³µìë³„ ê¸°ëŠ¥ í†µí•©
- LoadBalancer íƒ€ì… ì„œë¹„ìŠ¤ ìƒì„± ì‹œ ì‹¤ì œ í´ë¼ìš°ë“œ LB ìƒì„± ë“±

### Worker Node

**1. Kubelet**

- ê° ë…¸ë“œì˜ ì—ì´ì „íŠ¸
- API Serverë¡œë¶€í„° íŒŒë“œ ëª…ì„¸ë¥¼ ë°›ì•„ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì— ì „ë‹¬
- íŒŒë“œì™€ ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  API Serverì— ë³´ê³ 

**2. Kube-proxy**

- ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œ
- Serviceì˜ ê°€ìƒ IPë¥¼ ì‹¤ì œ íŒŒë“œ IPë¡œ ë³€í™˜
- iptables ë˜ëŠ” IPVS ê·œì¹™ ê´€ë¦¬

**3. Container Runtime**

- ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰
- Docker, containerd, CRI-O ë“±

**ë”¥ë¨¹ ì£¼ì œ:**

- Control Plane ê³ ê°€ìš©ì„± (HA) êµ¬ì„±
- etcd ë°±ì—…ê³¼ ë³µêµ¬ ì „ëµ
- Custom Scheduler ê°œë°œ
- Admission Webhook: ì»¤ìŠ¤í…€ ê²€ì¦ ë° ë³€ê²½ ë¡œì§
- Operator Pattern: Custom Resource Definition (CRD)ê³¼ Custom Controller
- API Aggregation Layer
- ì¿ ë²„ë„¤í‹°ìŠ¤ ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ (íŠ¹íˆ Controller íŒ¨í„´)

---

## ğŸ” 8ë‹¨ê³„: ê´€ì°°ì„± (Observability)
### ë¡œê¹…

**ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹… í•„ìš”ì„±:** íŒŒë“œëŠ” ì–¸ì œë“  ì‚­ì œë  ìˆ˜ ìˆì–´, ë¡œê·¸ë¥¼ ì™¸ë¶€ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.

**ì¼ë°˜ì ì¸ ìŠ¤íƒ: EFK**

- **Elasticsearch**: ë¡œê·¸ ì €ì¥ ë° ê²€ìƒ‰
- **Fluentd/Fluent Bit**: ë¡œê·¸ ìˆ˜ì§‘ ë° ì „ë‹¬
- **Kibana**: ë¡œê·¸ ì‹œê°í™”

**ìµœì‹  íŠ¸ë Œë“œ: Loki**

- Grafana Labsì˜ ê²½ëŸ‰ ë¡œê·¸ ì‹œìŠ¤í…œ
- ë¡œê·¸ ìì²´ê°€ ì•„ë‹Œ ë©”íƒ€ë°ì´í„°ë§Œ ì¸ë±ì‹±í•˜ì—¬ ì €ì¥ ê³µê°„ ì ˆì•½

### ëª¨ë‹ˆí„°ë§

**Prometheus + Grafana**

PrometheusëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ì‚¬ì‹¤ìƒ í‘œì¤€ì¸ ëª¨ë‹ˆí„°ë§ ë„êµ¬ì…ë‹ˆë‹¤.


```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-app
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
```

**ì£¼ìš” ë©”íŠ¸ë¦­:**

- CPU, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- ë„¤íŠ¸ì›Œí¬ I/O
- íŒŒë“œ ì¬ì‹œì‘ íšŸìˆ˜
- ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­

### ì¶”ì  (Tracing)

**ë¶„ì‚° ì¶”ì ì˜ í•„ìš”ì„±:** ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ í•˜ë‚˜ì˜ ìš”ì²­ì´ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ê±°ì¹©ë‹ˆë‹¤. ì–´ë””ì„œ ëŠë ¤ì§€ëŠ”ì§€ ì¶”ì ì´ í•„ìš”í•©ë‹ˆë‹¤.

**ë„êµ¬:**

- Jaeger
- Zipkin
- OpenTelemetry (í‘œì¤€í™”ëœ ê³„ì¸¡ í”„ë ˆì„ì›Œí¬)

**ë”¥ë¨¹ ì£¼ì œ:**

- Metrics Serverì™€ ë¦¬ì†ŒìŠ¤ ë©”íŠ¸ë¦­ íŒŒì´í”„ë¼ì¸
- Custom Metricsì™€ External Metrics (HPA ê³ ê¸‰ í™œìš©)
- PromQL ì¿¼ë¦¬ ì–¸ì–´ ë§ˆìŠ¤í„°
- Grafana ëŒ€ì‹œë³´ë“œ ì„¤ê³„ Best Practice
- Thanos/Cortex: Prometheus ì¥ê¸° ì €ì¥ ë° HA
- OpenTelemetry Collector í™œìš©
- eBPF ê¸°ë°˜ ê´€ì°°ì„± ë„êµ¬: Cilium, Pixie

---

## ğŸ›¡ï¸ 9ë‹¨ê³„: ë³´ì•ˆ

### RBAC (Role-Based Access Control)

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **ëˆ„ê°€, ë¬´ì—‡ì„, ì–´ë–»ê²Œ** í•  ìˆ˜ ìˆëŠ”ì§€ ì„¸ë°€í•˜ê²Œ ì œì–´í•©ë‹ˆë‹¤.

**ì£¼ìš” ë¦¬ì†ŒìŠ¤:**

1. **ServiceAccount**: íŒŒë“œê°€ ì‚¬ìš©í•˜ëŠ” ê³„ì •
2. **Role/ClusterRole**: ê¶Œí•œ ì •ì˜
    - Role: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ê¶Œí•œ
    - ClusterRole: í´ëŸ¬ìŠ¤í„° ì „ì²´ ê¶Œí•œ
3. **RoleBinding/ClusterRoleBinding**: ì‚¬ìš©ì/ê·¸ë£¹/ServiceAccountì— ê¶Œí•œ ë¶€ì—¬


```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: app-reader
  namespace: development
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: pod-reader
  namespace: development
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: development
subjects:
- kind: ServiceAccount
  name: app-reader
  namespace: development
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io
```

### Pod Security Standards

íŒŒë“œê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ì œí•œí•©ë‹ˆë‹¤.

**ì„¸ ê°€ì§€ ë ˆë²¨:**

1. **Privileged**: ì œí•œ ì—†ìŒ
2. **Baseline**: ê¸°ë³¸ì ì¸ ë³´ì•ˆ (ê¶Œì¥)
3. **Restricted**: ë§¤ìš° ì—„ê²© (í”„ë¡œë•ì…˜ ê¶Œì¥)


```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: secure-app
  labels:
    pod-security.kubernetes.io/enforce: restricted
```

**ì£¼ìš” ì œì•½ì‚¬í•­ (Restricted):**

- rootë¡œ ì‹¤í–‰ ë¶ˆê°€
- privileged ì»¨í…Œì´ë„ˆ ë¶ˆê°€
- hostPath ë³¼ë¥¨ ë¶ˆê°€
- hostNetwork, hostPID, hostIPC ë¶ˆê°€

### Network Policy

íŒŒë“œ ê°„ í†µì‹ ì„ ë°©í™”ë²½ì²˜ëŸ¼ ì œì–´í•©ë‹ˆë‹¤.


```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: backend-policy
  namespace: production
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 8080
  egress:
  - to:
    - podSelector:
        matchLabels:
          app: database
    ports:
    - protocol: TCP
      port: 5432
```

**ë”¥ë¨¹ ì£¼ì œ:**

- OPA (Open Policy Agent)ì™€ Gatekeeper: ì •ì±… ê¸°ë°˜ ê±°ë²„ë„ŒìŠ¤
- Admission Controller ì»¤ìŠ¤í„°ë§ˆì´ì§•
- Pod Security Admissionê³¼ ì´ì „ PodSecurityPolicy ë§ˆì´ê·¸ë ˆì´ì…˜
- mTLSì™€ Service Mesh ë³´ì•ˆ
- ì´ë¯¸ì§€ ì„œëª… ë° ê²€ì¦: Notary, Cosign
- Runtime Security: Falco, Aqua, Sysdig
- Secrets ê´€ë¦¬: HashiCorp Vault, External Secrets Operator
- Supply Chain Security: SLSA Framework

---

## ğŸš€ 10ë‹¨ê³„: ìµœì‹  ì¸í”„ë¼ íŠ¸ë Œë“œì™€ ì¿ ë²„ë„¤í‹°ìŠ¤

### GitOps

**ê°œë…:** Gitì„ Single Source of Truthë¡œ ì‚¬ìš©í•˜ëŠ” ë°°í¬ ë°©ì‹

**ë„êµ¬:**

- **ArgoCD**: ê°€ì¥ ì¸ê¸°ìˆëŠ” GitOps CD ë„êµ¬
- **Flux**: CNCF ì¡¸ì—… í”„ë¡œì íŠ¸
- **Jenkins X**: CI/CD í†µí•©

**ì‘ë™ ë°©ì‹:**

1. ê°œë°œìê°€ Gitì— ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ ì»¤ë°‹
2. ArgoCDê°€ Git ì €ì¥ì†Œë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§
3. ë³€ê²½ ê°ì§€ ì‹œ ìë™ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì— ì ìš©
4. ë“œë¦¬í”„íŠ¸ ê°ì§€ ë° ìë™ ë™ê¸°í™”

**ì¥ì :**

- ì½”ë“œ ë¦¬ë·°ë¥¼ í†µí•œ ë³€ê²½ ê²€í† 
- ì™„ë²½í•œ ë³€ê²½ ì´ë ¥ (Git log)
- ì‰¬ìš´ ë¡¤ë°± (Git revert)
- ì¬í•´ ë³µêµ¬ ìš©ì´

### Service Mesh

**ë¬¸ì œ:** ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ìˆ˜ë°± ê°œê°€ ë˜ë©´ ë„¤íŠ¸ì›Œí‚¹ ë³µì¡ë„ í­ë°œ

**Service Meshê°€ ì œê³µí•˜ëŠ” ê²ƒ:**

- ì„œë¹„ìŠ¤ ê°„ mTLS ìë™ ì ìš©
- íŠ¸ë˜í”½ ê´€ë¦¬ (Circuit Breaker, Retry, Timeout)
- Canary ë°°í¬, A/B í…ŒìŠ¤íŠ¸
- ìƒì„¸í•œ ë©”íŠ¸ë¦­ê³¼ ì¶”ì 

**ì¸ê¸° ìˆëŠ” Service Mesh:**

- **Istio**: ê°€ì¥ ê¸°ëŠ¥ì´ í’ë¶€í•˜ì§€ë§Œ ë³µì¡
- **Linkerd**: ê°€ë³ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ì›€
- **Consul**: HashiCorp ì œí’ˆ, ë©€í‹° í´ë¼ìš°ë“œ ì§€ì›

### Serverless on Kubernetes

**Knative**

- ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ„ì—ì„œ ì„œë²„ë¦¬ìŠ¤ ì›Œí¬ë¡œë“œ ì‹¤í–‰
- íŠ¸ë˜í”½ì´ ì—†ìœ¼ë©´ íŒŒë“œë¥¼ 0ìœ¼ë¡œ ìŠ¤ì¼€ì¼ ë‹¤ìš´
- ìë™ ìŠ¤ì¼€ì¼ë§ê³¼ ë¦¬ë¹„ì „ ê´€ë¦¬

```yaml
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: hello-world
spec:
  template:
    spec:
      containers:
      - image: gcr.io/knative-samples/helloworld-go
        env:
        - name: TARGET
          value: "Knative"
```

**ì¥ì :**

- ë¹„ìš© ì ˆê° (ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œ ë¦¬ì†ŒìŠ¤ 0)
- ìë™ ìŠ¤ì¼€ì¼ë§ (0 â†’ ìˆ˜ì²œ ê°œ íŒŒë“œ)
- ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ìë™í™”

**ë‹¤ë¥¸ ì˜µì…˜:**

- **OpenFaaS**: Function as a Service
- **Fission**: ë¹ ë¥¸ ì½œë“œ ìŠ¤íƒ€íŠ¸ì— ìµœì í™”
- **Kubeless**: ê²½ëŸ‰ FaaS í”„ë ˆì„ì›Œí¬

### Platform Engineeringê³¼ Internal Developer Platform (IDP)

**ê°œë…:** ê°œë°œìê°€ ì¸í”„ë¼ ë³µì¡ì„±ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  ì½”ë“œì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì¶”ìƒí™” ë ˆì´ì–´ ì œê³µ

**ë„êµ¬:**

- **Backstage**: Spotifyê°€ ë§Œë“  ê°œë°œì í¬í„¸
- **Crossplane**: ì¸í”„ë¼ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ì²˜ëŸ¼ ê´€ë¦¬
- **Porter**: CNAB ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§•
- **Humanitec**: í”Œë«í¼ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

**ì˜ˆì‹œ: Crossplane**


```yaml
apiVersion: database.aws.crossplane.io/v1beta1
kind: RDSInstance
metadata:
  name: my-postgres
spec:
  forProvider:
    region: us-east-1
    dbInstanceClass: db.t3.micro
    engine: postgres
    engineVersion: "13.7"
    masterUsername: admin
    allocatedStorage: 20
```

ê°œë°œìëŠ” AWS ì½˜ì†” ì—†ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë§Œìœ¼ë¡œ RDS ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### FinOpsì™€ ë¹„ìš© ìµœì í™”

**ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë¹„ìš©ì´ í­ë°œí•˜ëŠ” ì´ìœ :**

- ë¦¬ì†ŒìŠ¤ ìš”ì²­(request)ê³¼ ì‹¤ì œ ì‚¬ìš©ëŸ‰ì˜ ì°¨ì´
- ê³¼ë„í•œ ì˜¤ë²„í”„ë¡œë¹„ì €ë‹
- ìœ íœ´ ë¦¬ì†ŒìŠ¤ ë°©ì¹˜

**ë¹„ìš© ìµœì í™” ë„êµ¬:**

**1. Kubecost**

- ë„¤ì„ìŠ¤í˜ì´ìŠ¤, íŒŒë“œ, ë ˆì´ë¸”ë³„ ë¹„ìš© ì¶”ì 
- Right-sizing ê¶Œì¥ì‚¬í•­ ì œê³µ
- ì‹¤ì‹œê°„ ë¹„ìš© ì•Œë¦¼

**2. Goldilocks**

- VPAë¥¼ í™œìš©í•œ ë¦¬ì†ŒìŠ¤ request/limit ê¶Œì¥

**3. Karpenter (AWS)**

- ë…¸ë“œë¥¼ ìë™ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹/ë””í”„ë¡œë¹„ì €ë‹
- Cluster Autoscalerë³´ë‹¤ ë¹ ë¥´ê³  íš¨ìœ¨ì 
- ì›Œí¬ë¡œë“œ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ìë™ ì„ íƒ

**ëª¨ë²” ì‚¬ë¡€:**


```yaml
spec:
  containers:
  - name: app
    resources:
      requests:  # ìŠ¤ì¼€ì¤„ë§ ê¸°ì¤€
        memory: "128Mi"
        cpu: "100m"
      limits:    # ìƒí•œì„ 
        memory: "256Mi"
        cpu: "200m"
```

**ë”¥ë¨¹ ì£¼ì œ:**

- Vertical Pod Autoscaler (VPA) ì‹¤ì „ í™œìš©
- Spot/Preemptible ì¸ìŠ¤í„´ìŠ¤ í™œìš© ì „ëµ
- Multi-tenancy í™˜ê²½ì—ì„œì˜ Fair Scheduling
- Resource Bin Packingê³¼ Fragmentation í•´ê²°
- í´ë¼ìš°ë“œë³„ ë¹„ìš© êµ¬ì¡° ì´í•´ (AWS EKS, GKE, AKS)

---

## ğŸ­ 11ë‹¨ê³„: ì‹¤ì „ ì•„í‚¤í…ì²˜ íŒ¨í„´

### 1. ë©€í‹° í´ëŸ¬ìŠ¤í„° ì „ëµ

**ì™œ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ì˜í•˜ë‚˜?**

- í™˜ê²½ ë¶„ë¦¬ (dev, staging, prod)
- ì§€ì—­ ë¶„ì‚° (ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤)
- ì¥ì•  ê²©ë¦¬ (blast radius ìµœì†Œí™”)
- ê·œì • ì¤€ìˆ˜ (ë°ì´í„° ì£¼ê¶Œ)

**ë©€í‹° í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ë„êµ¬:**

**KubeFed (Kubernetes Federation)**

- ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ë¥¼ í•˜ë‚˜ì²˜ëŸ¼ ê´€ë¦¬
- ë¦¬ì†ŒìŠ¤ë¥¼ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì— ìë™ ë°°í¬

**Rancher**

- ì›¹ UIë¡œ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„° í†µí•© ê´€ë¦¬
- RBAC, ëª¨ë‹ˆí„°ë§, ë¡œê¹… í†µí•©

**ArgoCD Application Sets**

- GitOps ë°©ì‹ìœ¼ë¡œ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬
- í…œí”Œë¦¿ì„ í†µí•œ ì„¤ì • í†µí•©

### 2. Blue-Green ë°°í¬

**ê°œë…:** ë‘ ê°œì˜ ë™ì¼í•œ í™˜ê²½(Blue, Green)ì„ ìœ ì§€í•˜ê³  ìˆœê°„ì ìœ¼ë¡œ ì „í™˜

yaml

```yaml
# Blue í™˜ê²½
apiVersion: v1
kind: Service
metadata:
  name: my-app
spec:
  selector:
    app: my-app
    version: blue  # Blueë¡œ íŠ¸ë˜í”½ ì „ë‹¬
  ports:
  - port: 80
---
# Green í™˜ê²½ ë°°í¬ (ìƒˆ ë²„ì „)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app-green
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-app
      version: green
  template:
    metadata:
      labels:
        app: my-app
        version: green
    spec:
      containers:
      - name: app
        image: myapp:v2.0
```

ê²€ì¦ í›„ Serviceì˜ selectorë¥¼ `version: green`ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ì¦‰ì‹œ ì „í™˜ë©ë‹ˆë‹¤.

### 3. Canary ë°°í¬

**ê°œë…:** ìƒˆ ë²„ì „ì„ ì¼ë¶€ ì‚¬ìš©ìì—ê²Œë§Œ ë¨¼ì € ë°°í¬í•˜ê³  ì ì§„ì ìœ¼ë¡œ í™•ëŒ€

**Argo Rolloutsë¥¼ ì‚¬ìš©í•œ Canary:**

yaml

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Rollout
metadata:
  name: my-app
spec:
  replicas: 10
  strategy:
    canary:
      steps:
      - setWeight: 10    # 10%ì—ê²Œ ë°°í¬
      - pause: {duration: 5m}
      - setWeight: 30    # 30%ë¡œ í™•ëŒ€
      - pause: {duration: 5m}
      - setWeight: 70
      - pause: {duration: 5m}
  template:
    spec:
      containers:
      - name: app
        image: myapp:v2.0
```

**Istio/Linkerdë¥¼ ì‚¬ìš©í•œ ê³ ê¸‰ Canary:**

- íŠ¹ì • ì‚¬ìš©ì ê·¸ë£¹ì—ê²Œë§Œ ë°°í¬ (í—¤ë” ê¸°ë°˜ ë¼ìš°íŒ…)
- A/B í…ŒìŠ¤íŠ¸
- ìë™ rollback (ì—ëŸ¬ìœ¨ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ)

### 4. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´

**ë™ê¸° í†µì‹  (Synchronous):**

- REST API (Service + Ingress)
- gRPC (ê³ ì„±ëŠ¥ RPC í”„ë ˆì„ì›Œí¬)

**ë¹„ë™ê¸° í†µì‹  (Asynchronous):**

- ë©”ì‹œì§€ í: RabbitMQ, Apache Kafka, NATS
- ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°: Kafka Streams, Apache Flink

**ì˜ˆì‹œ: Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜**

yaml

```yaml
# Kafka í´ëŸ¬ìŠ¤í„° (Strimzi Operator ì‚¬ìš©)
apiVersion: kafka.strimzi.io/v1beta2
kind: Kafka
metadata:
  name: my-cluster
spec:
  kafka:
    replicas: 3
    listeners:
      - name: plain
        port: 9092
        type: internal
        tls: false
  zookeeper:
    replicas: 3
```

**ë”¥ë¨¹ ì£¼ì œ:**

- Circuit Breaker íŒ¨í„´ êµ¬í˜„ (Istio, Resilience4j)
- Saga íŒ¨í„´: ë¶„ì‚° íŠ¸ëœì­ì…˜ ê´€ë¦¬
- Event Sourcingê³¼ CQRS
- API Gateway íŒ¨í„´ (Kong, Ambassador, Gloo)
- Service Meshì˜ Traffic Splitting ê³ ê¸‰ í™œìš©

---

## ğŸ”§ 12ë‹¨ê³„: ê°œë°œ ì›Œí¬í”Œë¡œìš°ì™€ ë„êµ¬

### 1. ë¡œì»¬ ê°œë°œ í™˜ê²½

**Minikube**

- ê°€ì¥ ê°„ë‹¨í•œ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤
- ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°

bash

```bash
minikube start --cpus 4 --memory 8192
minikube dashboard  # ì›¹ UI ì‹¤í–‰
```

**Kind (Kubernetes in Docker)**

- Docker ì»¨í…Œì´ë„ˆë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œ ì‹¤í–‰
- ë©€í‹° ë…¸ë“œ í´ëŸ¬ìŠ¤í„° ì§€ì›
- CI/CD íŒŒì´í”„ë¼ì¸ì— ì í•©

bash

```bash
kind create cluster --config kind-config.yaml
```

**k3d (k3s in Docker)**

- ê²½ëŸ‰ ì¿ ë²„ë„¤í‹°ìŠ¤ k3së¥¼ Dockerì—ì„œ ì‹¤í–‰
- ê°€ì¥ ë¹ ë¥¸ ì‹œì‘ ì‹œê°„

bash

```bash
k3d cluster create dev --servers 1 --agents 2
```

**Docker Desktop Kubernetes**

- Mac/Windowsì—ì„œ ê°€ì¥ ì‰¬ìš´ ì„¤ì •
- ê°œë°œìš©ìœ¼ë¡œ ì¶©ë¶„

### 2. ê°œë°œ ê°€ì† ë„êµ¬

**Skaffold**

- ì½”ë“œ ë³€ê²½ â†’ ë¹Œë“œ â†’ ë°°í¬ ìë™í™”

yaml

```yaml
apiVersion: skaffold/v4beta1
kind: Config
build:
  artifacts:
  - image: myapp
    docker:
      dockerfile: Dockerfile
deploy:
  kubectl:
    manifests:
    - k8s/*.yaml
```

bash

```bash
skaffold dev  # íŒŒì¼ ë³€ê²½ ê°ì§€í•˜ì—¬ ìë™ ì¬ë°°í¬
```

**Tilt**

- ë” ê°•ë ¥í•œ ê°œë°œ ê²½í—˜
- ì›¹ UI ì œê³µ
- ë©€í‹° ì„œë¹„ìŠ¤ ê°œë°œì— ìµœì í™”

**Telepresence**

- ë¡œì»¬ ì½”ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°
- í´ëŸ¬ìŠ¤í„°ì˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ì§ì ‘ í†µì‹ í•˜ë©´ì„œ ë¡œì»¬ì—ì„œ ë””ë²„ê¹…

bash

```
telepresence connect
telepresence intercept my-service --port 8080
# ì´ì œ my-serviceë¡œ ê°€ëŠ” íŠ¸ë˜í”½ì´ ë¡œì»¬ 8080ìœ¼ë¡œ ì˜´
```

### 3. Helm - ì¿ ë²„ë„¤í‹°ìŠ¤ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €

**Helm Chartë€?**
- ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ë“¤ì˜ í…œí”Œë¦¿ ë¬¶ìŒ
- ê°’(values)ì„ ì£¼ì…í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥

**ê¸°ë³¸ êµ¬ì¡°:**
```
my-chart/
  Chart.yaml        # ì°¨íŠ¸ ë©”íƒ€ë°ì´í„°
  values.yaml       # ê¸°ë³¸ê°’
  templates/        # ì¿ ë²„ë„¤í‹°ìŠ¤ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ í…œí”Œë¦¿
    deployment.yaml
    service.yaml
    ingress.yaml
````

**í…œí”Œë¦¿ ì˜ˆì‹œ (deployment.yaml):**


```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ .Release.Name }}-{{ .Chart.Name }}
spec:
  replicas: {{ .Values.replicaCount }}
  template:
    spec:
      containers:
      - name: {{ .Chart.Name }}
        image: {{ .Values.image.repository }}:{{ .Values.image.tag }}
        ports:
        - containerPort: {{ .Values.service.port }}
        resources:
          {{- toYaml .Values.resources | nindent 10 }}
```

**values.yaml:**


```yaml
replicaCount: 3
image:
  repository: myapp
  tag: "1.0.0"
service:
  port: 8080
resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "200m"
```

**ì‚¬ìš©:**


```
# ì°¨íŠ¸ ì„¤ì¹˜
helm install my-release ./my-chart

# ê°’ì„ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ì„¤ì¹˜
helm install my-release ./my-chart \
  --set replicaCount=5 \
  --set image.tag=2.0.0

# ì—…ê·¸ë ˆì´ë“œ
helm upgrade my-release ./my-chart

# ë¡¤ë°±
helm rollback my-release 1
```

**ë”¥ë¨¹ ì£¼ì œ:**
- Helm Hooks: ë°°í¬ ì „í›„ ì‘ì—… ì‹¤í–‰
- Helm ì„œë¸Œì°¨íŠ¸ì™€ ì˜ì¡´ì„± ê´€ë¦¬
- Helmfile: ì—¬ëŸ¬ ì°¨íŠ¸ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬
- Helm OCI ë ˆì§€ìŠ¤íŠ¸ë¦¬ í™œìš©
- Kustomize vs Helm ë¹„êµ ë° ì„ íƒ ê¸°ì¤€
- Helm Chart ë³´ì•ˆ ìŠ¤ìºë‹ (Checkov, Kubesec)

### 4. Kustomize - ì„ ì–¸ì  ì»¤ìŠ¤í„°ë§ˆì´ì œì´ì…˜

**Helmê³¼ì˜ ì°¨ì´:**
- í…œí”Œë¦¿ ì–¸ì–´ ì—†ìŒ
- ê¸°ë³¸ YAMLì— íŒ¨ì¹˜ë¥¼ ë§ë¶™ì´ëŠ” ë°©ì‹
- kubectlì— ë‚´ì¥ë˜ì–´ ìˆìŒ

**ë””ë ‰í† ë¦¬ êµ¬ì¡°:**
```
base/
  deployment.yaml
  service.yaml
  kustomization.yaml
overlays/
  dev/
    kustomization.yaml
    patch-replicas.yaml
  prod/
    kustomization.yaml
    patch-replicas.yaml
````

**base/kustomization.yaml:**

```yaml
resources:
  - deployment.yaml
  - service.yaml
```

**overlays/prod/kustomization.yaml:**

```yaml
bases:
  - ../../base
patchesStrategicMerge:
  - patch-replicas.yaml
namespace: production
namePrefix: prod-
commonLabels:
  environment: production
```

**ë°°í¬:**

```bash
kubectl apply -k overlays/prod/
```

**ë”¥ë¨¹ ì£¼ì œ:**

- Strategic Merge Patch vs JSON Patch
- Kustomize Components: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íŒ¨ì¹˜ ì¡°ê°
- Kustomize + ArgoCD í†µí•©
- Sealed Secretsì™€ Kustomize í†µí•©

---

## ğŸ“Š 13ë‹¨ê³„: ì‹¤ì „ ë¬¸ì œ í•´ê²°ê³¼ ë””ë²„ê¹…

### 1. íŒŒë“œê°€ ì‹œì‘ë˜ì§€ ì•Šì„ ë•Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**


```bash
# 1. íŒŒë“œ ìƒíƒœ í™•ì¸
kubectl get pods
# ìƒíƒœ: Pending, CrashLoopBackOff, ImagePullBackOff, Error

# 2. ìì„¸í•œ ì •ë³´ í™•ì¸
kubectl describe pod <pod-name>
# Events ì„¹ì…˜ì„ ì£¼ì˜ê¹Šê²Œ í™•ì¸

# 3. ë¡œê·¸ í™•ì¸
kubectl logs <pod-name>
kubectl logs <pod-name> --previous  # ì´ì „ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸

# 4. íŠ¹ì • ì»¨í…Œì´ë„ˆ ë¡œê·¸ (íŒŒë“œì— ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆê°€ ìˆì„ ë•Œ)
kubectl logs <pod-name> -c <container-name>
```

**ì£¼ìš” ì—ëŸ¬ì™€ í•´ê²°:**

**ImagePullBackOff:**

- ì›ì¸: ì´ë¯¸ì§€ë¥¼ pullí•  ìˆ˜ ì—†ìŒ
- í•´ê²°:
    - ì´ë¯¸ì§€ ì´ë¦„/íƒœê·¸ í™•ì¸
    - Private ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¼ë©´ imagePullSecrets ì„¤ì •


```yaml
  spec:
    imagePullSecrets:
    - name: regcred
```

**CrashLoopBackOff:**

- ì›ì¸: ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ í›„ ê³„ì† ì¢…ë£Œë¨
- í•´ê²°:
    - ë¡œê·¸ì—ì„œ ì—ëŸ¬ í™•ì¸
    - livenessProbe ì„¤ì • í™•ì¸ (ë„ˆë¬´ ë¹ ë¥´ê²Œ ì²´í¬í•˜ëŠ”ì§€)
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œê°„ ê³ ë ¤í•œ initialDelaySeconds ì„¤ì •

**Pending:**

- ì›ì¸: ìŠ¤ì¼€ì¤„ë§ ë¶ˆê°€
- í•´ê²°:
    - `kubectl describe pod`ì—ì„œ ìŠ¤ì¼€ì¤„ë§ ì‹¤íŒ¨ ì´ìœ  í™•ì¸
    - ë¦¬ì†ŒìŠ¤ ë¶€ì¡±: ë…¸ë“œ ì¶”ê°€ ë˜ëŠ” request ì¤„ì´ê¸°
    - PVCê°€ Boundë˜ì§€ ì•ŠìŒ: ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ í™•ì¸
    - Node Selector/Affinity ì¡°ê±´ í™•ì¸

### 2. ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ ë””ë²„ê¹…

**íŒŒë“œ ê°„ í†µì‹ ì´ ì•ˆ ë  ë•Œ:**


```bash
# 1. ëŒ€ìƒ íŒŒë“œì˜ IP í™•ì¸
kubectl get pod <pod-name> -o wide

# 2. ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ íŒŒë“œ ì‹¤í–‰
kubectl run -it --rm debug --image=nicolaka/netshoot --restart=Never -- /bin/bash

# íŒŒë“œ ë‚´ì—ì„œ:
curl http://<target-pod-ip>:8080
nslookup <service-name>
ping <pod-ip>
```

**Serviceê°€ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ:**

```bash
# 1. Serviceì˜ Endpoints í™•ì¸
kubectl get endpoints <service-name>
# ë¹„ì–´ìˆë‹¤ë©´ selectorê°€ íŒŒë“œì™€ ë§¤ì¹˜ë˜ì§€ ì•ŠìŒ

# 2. íŒŒë“œì˜ ë¼ë²¨ í™•ì¸
kubectl get pods --show-labels

# 3. Service selectorì™€ ë¹„êµ
kubectl get service <service-name> -o yaml | grep -A 5 selector
```

**NetworkPolicy ë¬¸ì œ:**

```bash
# NetworkPolicy ëª©ë¡ í™•ì¸
kubectl get networkpolicy

# íŠ¹ì • NetworkPolicy ìƒì„¸ í™•ì¸
kubectl describe networkpolicy <policy-name>
```

### 3. ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ë¬¸ì œ

**ë…¸ë“œì˜ ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸:**

```bash
kubectl top nodes
kubectl describe node <node-name>
# Allocated resources ì„¹ì…˜ í™•ì¸
```

**íŒŒë“œì˜ ì‹¤ì œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰:**

```bash
kubectl top pods
kubectl top pods --containers  # ì»¨í…Œì´ë„ˆë³„
```

**OOMKilled (Out of Memory):**

```bash
kubectl describe pod <pod-name>
# Last State: Terminated, Reason: OOMKilled í™•ì¸
```

í•´ê²°: memory limit ì¦ê°€

**CPU Throttling:**

```bash
# Prometheus ì¿¼ë¦¬
rate(container_cpu_cfs_throttled_seconds_total[5m])
```

í•´ê²°: CPU limit ì¦ê°€ ë˜ëŠ” ì œê±° ê³ ë ¤

### 4. ë””ë²„ê¹…ìš© ì„ì‹œ ì»¨í…Œì´ë„ˆ (Ephemeral Containers)

**ì¿ ë²„ë„¤í‹°ìŠ¤ 1.23+ì—ì„œ ì§€ì›:**


```bash
kubectl debug <pod-name> -it --image=busybox --target=<container-name>
```

íŒŒë“œë¥¼ ì¬ì‹œì‘í•˜ì§€ ì•Šê³  ë””ë²„ê¹… ë„êµ¬ê°€ í¬í•¨ëœ ì»¨í…Œì´ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

### 5. ìœ ìš©í•œ ë””ë²„ê¹… ëª…ë ¹ì–´ ëª¨ìŒ


```bash
# ëª¨ë“  ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl get all -n <namespace>

# ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸
kubectl get events --sort-by='.lastTimestamp'

# íŠ¹ì • ë ˆì´ë¸”ì˜ íŒŒë“œë§Œ í™•ì¸
kubectl get pods -l app=myapp

# YAML ì¶œë ¥
kubectl get pod <pod-name> -o yaml

# JSONPathë¡œ íŠ¹ì • í•„ë“œ ì¶”ì¶œ
kubectl get pods -o jsonpath='{.items[*].spec.containers[*].image}'

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì •ë ¬
kubectl top pods --sort-by=memory

# íŒŒë“œë¥¼ JSONìœ¼ë¡œ í¸ì§‘
kubectl edit pod <pod-name>

# íŒŒë“œì— ì‰˜ë¡œ ì ‘ì†
kubectl exec -it <pod-name> -- /bin/bash

# íŒŒì¼ ë³µì‚¬
kubectl cp <pod-name>:/path/to/file ./local-file
```

**ë”¥ë¨¹ ì£¼ì œ:**

- ksniffë¥¼ ì‚¬ìš©í•œ íŒ¨í‚· ìº¡ì²˜
- kubectl-debug í”ŒëŸ¬ê·¸ì¸
- eBPF ê¸°ë°˜ ì‹¤ì‹œê°„ ë””ë²„ê¹… (kubectl-trace)
- Sternì„ ì‚¬ìš©í•œ ë©€í‹° íŒŒë“œ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
- kubectx/kubens: ì»¨í…ìŠ¤íŠ¸ì™€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¹ ë¥¸ ì „í™˜
- k9s: í„°ë¯¸ë„ UIë¡œ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬

---

## ğŸ“ 14ë‹¨ê³„: í•™ìŠµ ë¡œë“œë§µê³¼ ìê²©ì¦

### í•™ìŠµ ê²½ë¡œ

**1ë‹¨ê³„: ê¸°ì´ˆ (1-2ê°œì›”)**

- Docker ê¸°ë³¸ ê°œë…ê³¼ ì‚¬ìš©ë²•
- ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜ ì´í•´
- íŒŒë“œ, ë””í”Œë¡œì´ë¨¼íŠ¸, ì„œë¹„ìŠ¤ ì‹¤ìŠµ
- minikubeë¡œ ë¡œì»¬ í™˜ê²½ êµ¬ì¶•

**2ë‹¨ê³„: ì¤‘ê¸‰ (2-3ê°œì›”)**

- ConfigMap, Secret, Volume
- Ingress, NetworkPolicy
- RBAC ê¸°ë³¸
- Helm ì‚¬ìš©ë²•
- ê¸°ë³¸ì ì¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**3ë‹¨ê³„: ê³ ê¸‰ (3-6ê°œì›”)**

- ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ëŸ¬ ê°œë°œ
- Operator íŒ¨í„´
- Service Mesh ë„ì…
- ë©€í‹° í´ëŸ¬ìŠ¤í„° ê´€ë¦¬
- ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ê³¼ ê´€ì°°ì„±

**4ë‹¨ê³„: ì „ë¬¸ê°€ (6ê°œì›”+)**

- ëŒ€ê·œëª¨ í”„ë¡œë•ì…˜ ìš´ì˜ ê²½í—˜
- ì„±ëŠ¥ ìµœì í™”ì™€ ë¹„ìš© ì ˆê°
- ë³´ì•ˆ ê°•í™”
- ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬

### ê³µì‹ ìê²©ì¦

**1. CKA (Certified Kubernetes Administrator)**

- ë‚œì´ë„: ì¤‘ê¸‰
- ë‚´ìš©: í´ëŸ¬ìŠ¤í„° ì„¤ì¹˜, íŠ¸ëŸ¬ë¸”ìŠˆíŒ…, ë„¤íŠ¸ì›Œí‚¹ ë“±
- í˜•ì‹: ì‹¤ìŠµ ì‹œí—˜ (í„°ë¯¸ë„ì—ì„œ ì§ì ‘ ì‘ì—…)
- ì¶”ì²œ: ìš´ì˜/ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´

**2. CKAD (Certified Kubernetes Application Developer)**

- ë‚œì´ë„: ì¤‘ê¸‰
- ë‚´ìš©: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬, ì„¤ì • ê´€ë¦¬, ê´€ì°°ì„±
- í˜•ì‹: ì‹¤ìŠµ ì‹œí—˜
- ì¶”ì²œ: ê°œë°œì, DevOps ì—”ì§€ë‹ˆì–´

**3. CKS (Certified Kubernetes Security Specialist)**

- ë‚œì´ë„: ê³ ê¸‰ (CKA í•„ìˆ˜)
- ë‚´ìš©: í´ëŸ¬ìŠ¤í„° ë³´ì•ˆ, Supply Chain Security
- í˜•ì‹: ì‹¤ìŠµ ì‹œí—˜
- ì¶”ì²œ: ë³´ì•ˆ ì—”ì§€ë‹ˆì–´, ì‹œë‹ˆì–´ SRE

### ì¶”ì²œ í•™ìŠµ ë¦¬ì†ŒìŠ¤

**ê³µì‹ ë¬¸ì„œ:**

- kubernetes.io/docs (ê°€ì¥ ì •í™•í•˜ê³  ìµœì‹ )

**ì±…:**

- "Kubernetes in Action" - Marko LukÅ¡a
- "Kubernetes Up & Running" - Kelsey Hightower
- "Programming Kubernetes" - ê³ ê¸‰ ì£¼ì œ

**ì˜¨ë¼ì¸ ê°•ì˜:**

- Udemy: Mumshad Mannambethì˜ CKA/CKAD ê°•ì˜
- A Cloud Guru
- Linux Foundation ê³µì‹ êµìœ¡

**ì‹¤ìŠµ í”Œë«í¼:**

- Killercoda (ë¬´ë£Œ ì‹¤ìŠµ í™˜ê²½)
- Killer.sh (ìê²©ì¦ ëª¨ì˜ê³ ì‚¬)
- KodeKloud (ì¸í„°ë™í‹°ë¸Œ ì‹¤ìŠµ)

**ì»¤ë®¤ë‹ˆí‹°:**

- CNCF Slack
- Kubernetes Slack
- Reddit r/kubernetes
- í•œêµ­ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‚¬ìš©ì ê·¸ë£¹

---

## ğŸ¢ 15ë‹¨ê³„: ì‹¤ì „ í”„ë¡œë•ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „ í•„ìˆ˜ í™•ì¸ì‚¬í•­

**1. ê³ ê°€ìš©ì„± (High Availability)**

yaml

```yaml
spec:
  replicas: 3  # ìµœì†Œ 3ê°œ (í™€ìˆ˜ ê¶Œì¥)
  
  # Anti-affinityë¡œ ë‹¤ë¥¸ ë…¸ë“œì— ë¶„ì‚°
  affinity:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchLabels:
            app: myapp
        topologyKey: kubernetes.io/hostname
```

**2. í—¬ìŠ¤ ì²´í¬**


```yaml
spec:
  containers:
  - name: app
    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤€ë¹„ í™•ì¸
    readinessProbe:
      httpGet:
        path: /health/ready
        port: 8080
      initialDelaySeconds: 10
      periodSeconds: 5
    
    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸
    livenessProbe:
      httpGet:
        path: /health/live
        port: 8080
      initialDelaySeconds: 30
      periodSeconds: 10
      failureThreshold: 3
    
    # ì‹œì‘ ì‹œê°„ì´ ê¸´ ì•±ì„ ìœ„í•œ ì²´í¬
    startupProbe:
      httpGet:
        path: /health/startup
        port: 8080
      failureThreshold: 30
      periodSeconds: 10
```

**3. ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**


```yaml
resources:
  requests:  # ìŠ¤ì¼€ì¤„ë§ ê¸°ì¤€, ë³´ì¥ë˜ëŠ” ìµœì†Œ ë¦¬ì†ŒìŠ¤
    memory: "256Mi"
    cpu: "250m"
  limits:    # ìƒí•œì„ 
    memory: "512Mi"
    cpu: "500m"  # CPU limitëŠ” ì‹ ì¤‘í•˜ê²Œ (throttling ì£¼ì˜)
```

**4. Graceful Shutdown**


```yaml
spec:
  terminationGracePeriodSeconds: 30
  containers:
  - name: app
    lifecycle:
      preStop:
        exec:
          command: ["/bin/sh", "-c", "sleep 15"]  # ì—°ê²° ë“œë ˆì´ë‹
```

**5. PodDisruptionBudget**


```yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: myapp-pdb
spec:
  minAvailable: 2  # ë˜ëŠ” maxUnavailable: 1
  selector:
    matchLabels:
      app: myapp
```

ë…¸ë“œ ì—…ê·¸ë ˆì´ë“œ, ìŠ¤ì¼€ì¼ ë‹¤ìš´ ì‹œì—ë„ ìµœì†Œí•œì˜ íŒŒë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

**6. ë³´ì•ˆ**


```yaml
spec:
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 1000
  
  containers:
  - name: app
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
        - ALL
```

**7. ì´ë¯¸ì§€ ê´€ë¦¬**


```yaml
spec:
  containers:
  - name: app
    image: myregistry.com/myapp:v1.2.3  # ëª…ì‹œì  íƒœê·¸, latest ê¸ˆì§€
    imagePullPolicy: IfNotPresent
```

### ëª¨ë‹ˆí„°ë§ í•„ìˆ˜ ì§€í‘œ

**ê³¨ë“  ì‹œê·¸ë„ (Google SRE):**

1. **Latency**: ìš”ì²­ ì‘ë‹µ ì‹œê°„
2. **Traffic**: ì´ˆë‹¹ ìš”ì²­ ìˆ˜ (RPS)
3. **Errors**: ì—ëŸ¬ìœ¨
4. **Saturation**: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ 

**ì¿ ë²„ë„¤í‹°ìŠ¤ íŠ¹í™” ì§€í‘œ:**

- íŒŒë“œ ì¬ì‹œì‘ íšŸìˆ˜
- íŒŒë“œ OOMKilled íšŸìˆ˜
- PVC ì‚¬ìš©ë¥ 
- ë…¸ë“œ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ 
- ë„¤íŠ¸ì›Œí¬ I/O
- API Server ì‘ë‹µ ì‹œê°„

**ì•Œë¦¼ ì„¤ì • ì˜ˆì‹œ:**


```yaml
# Prometheus Alert ê·œì¹™
groups:
- name: kubernetes
  rules:
  - alert: PodCrashLooping
    expr: rate(kube_pod_container_status_restarts_total[15m]) > 0
    for: 5m
    annotations:
      summary: "Pod {{ $labels.pod }} is crash looping"
  
  - alert: HighMemoryUsage
    expr: container_memory_usage_bytes / container_spec_memory_limit_bytes > 0.9
    for: 5m
    annotations:
      summary: "Container {{ $labels.container }} memory usage > 90%"
```

### ë°±ì—…ê³¼ ì¬í•´ ë³µêµ¬

**etcd ë°±ì—… (ê°€ì¥ ì¤‘ìš”):**


```bash
ETCDCTL_API=3 etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  snapshot save /backup/etcd-snapshot.db
```

**Velero: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°±ì—…**


```bash
# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „ì²´ ë°±ì—…
velero backup create my-backup --include-namespaces production

# ë³µêµ¬
velero restore create --from-backup my-backup
```

**ë”¥ë¨¹ ì£¼ì œ:**

- Chaos Engineering: Chaos Mesh, Litmus
- Progressive Delivery: Flagger + Istio
- Cost-aware autoscaling
- ë©€í‹° í…Œë„Œì‹œ ë³´ì•ˆ ê°•í™”
- Zero-trust networking
- ì»´í”Œë¼ì´ì–¸ìŠ¤ ìë™í™” (PCI-DSS, HIPAA, SOC 2)

---

---

**ì‘ì„±ì¼**: 2025-11-03
