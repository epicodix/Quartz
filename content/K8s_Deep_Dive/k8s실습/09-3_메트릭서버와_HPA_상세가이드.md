---
title: k8sì‹¤ìŠµ 9-3 - ë©”íŠ¸ë¦­ì„œë²„ì™€ HPA ìƒì„¸ ê°€ì´ë“œ
tags:
  - kubernetes
  - metrics-server
  - hpa
  - horizontal-pod-autoscaler
  - devops
  - infrastructure
aliases:
  - ë©”íŠ¸ë¦­ì„œë²„
  - HPA
  - ì¿ ë²„ë„¤í‹°ìŠ¤ì˜¤í† ìŠ¤ì¼€ì¼ë§
date: 2025-12-01
category: K8s_Deep_Dive/k8sì‹¤ìŠµ
status: ì™„ì„±
priority: ë†’ìŒ
---

# ğŸ¯ k8sì‹¤ìŠµ 9-3: ë©”íŠ¸ë¦­ì„œë²„ì™€ HPA ì™„ì „ ì •ë³µ ê°€ì´ë“œ

## ğŸ“‘ ëª©ì°¨
- [[#1. ë©”íŠ¸ë¦­ì„œë²„ ê°œë…ê³¼ ì•„í‚¤í…ì²˜|ë©”íŠ¸ë¦­ì„œë²„ ê¸°ì´ˆ]]
- [[#2. ë©”íŠ¸ë¦­ì„œë²„ ì„¤ì¹˜ ë° ì„¤ì •|ì„¤ì¹˜ ê°€ì´ë“œ]]
- [[#3. HPA ê°œë…ê³¼ ì‘ë™ì›ë¦¬|HPA ì´í•´]]
- [[#4. HPA ì‹¤ì „ êµ¬í˜„|ì‹¤ìŠµ ì˜ˆì œ]]
- [[#5. ê³ ê¸‰ HPA ì„¤ì •|ì‹¬í™” ì„¤ì •]]
- [[#6. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë° ëª¨ë‹ˆí„°ë§|ë¬¸ì œ í•´ê²°]]

---

## 1. ë©”íŠ¸ë¦­ì„œë²„ ê°œë…ê³¼ ì•„í‚¤í…ì²˜

> [!note] ë©”íŠ¸ë¦­ì„œë²„ë€?
> ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰(CPU, ë©”ëª¨ë¦¬)ì„ ìˆ˜ì§‘í•˜ê³  API ì„œë²„ë¥¼ í†µí•´ ì œê³µí•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### ğŸ’¡ ë©”íŠ¸ë¦­ì„œë²„ì˜ ì—­í• 

**ğŸ¤” ì§ˆë¬¸**: "ì™œ ë©”íŠ¸ë¦­ì„œë²„ê°€ í•„ìš”í•œê°€?"

#### ğŸ“‹ ë©”íŠ¸ë¦­ì„œë²„ê°€ í•´ê²°í•˜ëŠ” ë¬¸ì œë“¤

> [!example] ì‹¤ì œ ìƒí™©
> 1. **ë¬¸ì œ**: `kubectl top pods` ëª…ë ¹ì–´ ì‚¬ìš© ë¶ˆê°€
> 2. **ê°ì§€**: "error: Metrics API not available" ì—ëŸ¬
> 3. **ì¡°ì¹˜**: ë©”íŠ¸ë¦­ì„œë²„ ì„¤ì¹˜
> 4. **ê²°ê³¼**: ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ë° HPA ë™ì‘ ê°€ëŠ¥

#### ğŸ—ï¸ ë©”íŠ¸ë¦­ì„œë²„ ì•„í‚¤í…ì²˜

```yaml
# ğŸ“Š ë©”íŠ¸ë¦­ì„œë²„ ì•„í‚¤í…ì²˜ êµ¬ì¡°
Components:
  kubelet: ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘
  metrics-server: ë©”íŠ¸ë¦­ ì§‘ê³„ ë° API ì œê³µ
  api-server: Metrics API ì—”ë“œí¬ì¸íŠ¸
  HPA Controller: ë©”íŠ¸ë¦­ ê¸°ë°˜ ìŠ¤ì¼€ì¼ë§ ê²°ì •
```

#### ğŸ“Š ë©”íŠ¸ë¦­ ë°ì´í„° íë¦„

| ë‹¨ê³„ | ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ë°ì´í„° |
|------|----------|------|--------|
| 1 | kubelet | ë…¸ë“œ/íŒŒë“œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ | CPU, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ |
| 2 | metrics-server | ë©”íŠ¸ë¦­ ì§‘ê³„ | í‘œì¤€í™”ëœ ë©”íŠ¸ë¦­ |
| 3 | API Server | Metrics API ì œê³µ | `/apis/metrics.k8s.io/` |
| 4 | kubectl/HPA | ë©”íŠ¸ë¦­ ì¡°íšŒ | ë¦¬ì†ŒìŠ¤ í˜„í™© |

---

## 2. ë©”íŠ¸ë¦­ì„œë²„ ì„¤ì¹˜ ë° ì„¤ì •

### ğŸ’» ì„¤ì¹˜ ë°©ë²•

#### ë°©ë²• 1: ê³µì‹ YAML ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì‚¬ìš©

```bash
# ğŸ“¦ ìµœì‹  metrics-server ì„¤ì¹˜
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
```

#### ë°©ë²• 2: ë¡œì»¬ ê°œë°œí™˜ê²½ìš© ì„¤ì •

```yaml
# ğŸ“Š metrics-server-insecure.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: metrics-server
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      k8s-app: metrics-server
  template:
    metadata:
      labels:
        k8s-app: metrics-server
    spec:
      containers:
      - name: metrics-server
        image: registry.k8s.io/metrics-server/metrics-server:v0.6.4
        args:
        - --cert-dir=/tmp
        - --secure-port=4443
        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
        - --kubelet-use-node-status-port
        - --metric-resolution=15s
        # ğŸš¨ ê°œë°œí™˜ê²½ìš© ì„¤ì • (í”„ë¡œë•ì…˜ì—ì„œëŠ” ì œê±°)
        - --kubelet-insecure-tls
        ports:
        - containerPort: 4443
          name: https
          protocol: TCP
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        volumeMounts:
        - mountPath: /tmp
          name: tmp-dir
      volumes:
      - emptyDir: {}
        name: tmp-dir
---
apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: https
  selector:
    k8s-app: metrics-server
```

### âš™ï¸ ì„¤ì¹˜ í™•ì¸ ë° ê²€ì¦

```bash
# ğŸ“‹ ë©”íŠ¸ë¦­ì„œë²„ íŒŒë“œ ìƒíƒœ í™•ì¸
kubectl get pods -n kube-system | grep metrics-server

# ğŸ“Š ë©”íŠ¸ë¦­ API ë™ì‘ í™•ì¸
kubectl top nodes
kubectl top pods

# ğŸ” ë©”íŠ¸ë¦­ì„œë²„ ë¡œê·¸ í™•ì¸
kubectl logs -n kube-system deployment/metrics-server
```

> [!warning] í”í•œ ì„¤ì¹˜ ì˜¤ë¥˜
> - TLS ì¸ì¦ì„œ ì˜¤ë¥˜: `--kubelet-insecure-tls` ì˜µì…˜ ì¶”ê°€
> - ë…¸ë“œ ì£¼ì†Œ í•´ê²° ì˜¤ë¥˜: `--kubelet-preferred-address-types` ì„¤ì •
> - ë¦¬ì†ŒìŠ¤ ë¶€ì¡±: ë©”ëª¨ë¦¬ 100Mi, CPU 100m ìµœì†Œ í•„ìš”

---

## 3. HPA ê°œë…ê³¼ ì‘ë™ì›ë¦¬

> [!note] HPA (Horizontal Pod Autoscaler)ë€?
> ë©”íŠ¸ë¦­ ê¸°ë°˜ìœ¼ë¡œ íŒŒë“œ ê°œìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì •í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ë©”ì»¤ë‹ˆì¦˜

### ğŸ¯ HPA ì‘ë™ ì›ë¦¬

#### ğŸ“‹ HPA ë™ì‘ í”„ë¡œì„¸ìŠ¤

> [!example] HPA ìŠ¤ì¼€ì¼ë§ ì‹œë‚˜ë¦¬ì˜¤
> 1. **ë©”íŠ¸ë¦­ ìˆ˜ì§‘**: metrics-serverì—ì„œ í˜„ì¬ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¡°íšŒ
> 2. **íƒ€ê²Ÿ ê³„ì‚°**: ì„¤ì •ëœ ëª©í‘œê°’ê³¼ í˜„ì¬ê°’ ë¹„êµ
> 3. **ìŠ¤ì¼€ì¼ë§ ê²°ì •**: í•„ìš”í•œ íŒŒë“œ ìˆ˜ ê³„ì‚°
> 4. **íŒŒë“œ ì¡°ì •**: Deployment/ReplicaSet ì—…ë°ì´íŠ¸
> 5. **ëŒ€ê¸°**: cooldown ê¸°ê°„ í›„ ë‹¤ì‹œ í‰ê°€

#### ğŸ’» HPA ê³„ì‚° ê³µì‹

```yaml
# ğŸ“Š HPA ìŠ¤ì¼€ì¼ë§ ê³„ì‚°
desiredReplicas = ceil[currentReplicas * (currentMetricValue / desiredMetricValue)]

# ì˜ˆì‹œ: í˜„ì¬ CPU ì‚¬ìš©ë¥ ì´ 80%, ëª©í‘œê°€ 50%ì¸ ê²½ìš°
# desiredReplicas = ceil[3 * (80% / 50%)] = ceil[3 * 1.6] = 5ê°œ
```

#### ğŸ“Š HPA vs VPA ë¹„êµ

| í•­ëª© | HPA | VPA |
|------|-----|-----|
| ìŠ¤ì¼€ì¼ë§ ë°©í–¥ | ìˆ˜í‰ (íŒŒë“œ ìˆ˜ ì¦ê°€) | ìˆ˜ì§ (ë¦¬ì†ŒìŠ¤ í• ë‹¹ ì¦ê°€) |
| ì ìš© ëŒ€ìƒ | Stateless ì•± | Stateful ì•± |
| ë©”íŠ¸ë¦­ ìœ í˜• | CPU, ë©”ëª¨ë¦¬, ì»¤ìŠ¤í…€ | CPU, ë©”ëª¨ë¦¬ |
| ì‘ë‹µ ì†ë„ | ë¹ ë¦„ (íŒŒë“œ ì¶”ê°€) | ëŠë¦¼ (ì¬ì‹œì‘ í•„ìš”) |
| ì‚¬ìš© ì‚¬ë¡€ | ì›¹ì„œë²„, API | ë°ì´í„°ë² ì´ìŠ¤, ìºì‹œ |

---

## 4. HPA ì‹¤ì „ êµ¬í˜„

### ğŸ’» ê¸°ë³¸ HPA ì„¤ì •

#### 1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì•± ë°°í¬

```yaml
# ğŸ“¦ hpa-test-app.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hpa-test-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hpa-test-app
  template:
    metadata:
      labels:
        app: hpa-test-app
    spec:
      containers:
      - name: app
        image: nginx:1.21
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 500m
            memory: 512Mi
---
apiVersion: v1
kind: Service
metadata:
  name: hpa-test-service
spec:
  selector:
    app: hpa-test-app
  ports:
  - port: 80
    targetPort: 80
  type: ClusterIP
```

#### 2ë‹¨ê³„: HPA ìƒì„±

```yaml
# ğŸ“Š hpa-config.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: hpa-test-app
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: hpa-test-app
  minReplicas: 1
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 50
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 70
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Percent
        value: 100
        periodSeconds: 60
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 50
        periodSeconds: 60
```

#### 3ë‹¨ê³„: HPA ë°°í¬ ë° í™•ì¸

```bash
# ğŸ“¦ ì•±ê³¼ HPA ë°°í¬
kubectl apply -f hpa-test-app.yaml
kubectl apply -f hpa-config.yaml

# ğŸ“Š HPA ìƒíƒœ í™•ì¸
kubectl get hpa
kubectl describe hpa hpa-test-app

# ğŸ” ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
watch kubectl get hpa,pods
```

### ğŸ”¥ ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¡œ HPA ë™ì‘ í™•ì¸

```bash
# ğŸ“Š ë¶€í•˜ ìƒì„± íŒŒë“œ ì‹¤í–‰
kubectl run -i --tty load-generator --rm --image=busybox --restart=Never -- /bin/sh

# ë¶€í•˜ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
while true; do
  wget -q -O- http://hpa-test-service/
done
```

> [!tip] HPA ëª¨ë‹ˆí„°ë§ ëª…ë ¹ì–´
> ```bash
> # HPA ì´ë²¤íŠ¸ í™•ì¸
> kubectl describe hpa hpa-test-app
> 
> # ë©”íŠ¸ë¦­ ì§ì ‘ ì¡°íšŒ
> kubectl top pods -l app=hpa-test-app
> 
> # HPA ë™ì‘ ë¡œê·¸
> kubectl get events --sort-by=.metadata.creationTimestamp
> ```

---

## 5. ê³ ê¸‰ HPA ì„¤ì •

### ğŸš€ ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ê¸°ë°˜ HPA

#### Prometheus ë©”íŠ¸ë¦­ ì‚¬ìš©

```yaml
# ğŸ“Š custom-metrics-hpa.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: custom-metrics-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: web-app
  minReplicas: 2
  maxReplicas: 20
  metrics:
  # ğŸ“ˆ HTTP ìš”ì²­ ìˆ˜ ê¸°ë°˜ ìŠ¤ì¼€ì¼ë§
  - type: Pods
    pods:
      metric:
        name: http_requests_per_second
      target:
        type: AverageValue
        averageValue: "10"
  # ğŸ“Š í ê¸¸ì´ ê¸°ë°˜ ìŠ¤ì¼€ì¼ë§
  - type: Object
    object:
      metric:
        name: queue_length
      describedObject:
        apiVersion: v1
        kind: Service
        name: redis-queue
      target:
        type: Value
        value: "30"
```

### âš™ï¸ ê³ ê¸‰ ìŠ¤ì¼€ì¼ë§ ì •ì±…

```yaml
# ğŸ“Š advanced-scaling-behavior.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: advanced-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: web-app
  minReplicas: 3
  maxReplicas: 100
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 60
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 120  # 2ë¶„ ì•ˆì •í™”
      policies:
      - type: Percent
        value: 50    # 50% ì¦ê°€
        periodSeconds: 60
      - type: Pods
        value: 5     # ìµœëŒ€ 5ê°œì”© ì¦ê°€
        periodSeconds: 60
      selectPolicy: Min  # ë” ë³´ìˆ˜ì ì¸ ì •ì±… ì„ íƒ
    scaleDown:
      stabilizationWindowSeconds: 600  # 10ë¶„ ì•ˆì •í™”
      policies:
      - type: Percent
        value: 25    # 25% ê°ì†Œ
        periodSeconds: 120
      - type: Pods
        value: 2     # ìµœëŒ€ 2ê°œì”© ê°ì†Œ
        periodSeconds: 120
      selectPolicy: Max  # ë” ë³´ìˆ˜ì ì¸ ì •ì±… ì„ íƒ
```

---

## 6. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë° ëª¨ë‹ˆí„°ë§

### ğŸš¨ ì£¼ìš” ë¬¸ì œì™€ í•´ê²°ë°©ë²•

#### ë¬¸ì œ 1: HPAê°€ ìŠ¤ì¼€ì¼ë§í•˜ì§€ ì•ŠìŒ

> [!danger] ì¼ë°˜ì ì¸ ì›ì¸
> 1. **ë©”íŠ¸ë¦­ì„œë²„ ë¯¸ì„¤ì¹˜**: `kubectl get apiservice v1beta1.metrics.k8s.io`
> 2. **ë¦¬ì†ŒìŠ¤ ìš”ì²­ ë¯¸ì„¤ì •**: requests ì„¤ì • í•„ìˆ˜
> 3. **ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì‹¤íŒ¨**: íŒŒë“œ ìƒíƒœ í™•ì¸

```bash
# ğŸ” ì§„ë‹¨ ëª…ë ¹ì–´
kubectl get hpa -o yaml
kubectl describe hpa [HPA_NAME]
kubectl get --raw /apis/metrics.k8s.io/v1beta1/nodes
kubectl get --raw /apis/metrics.k8s.io/v1beta1/pods
```

#### ë¬¸ì œ 2: ë©”íŠ¸ë¦­ì„œë²„ ì¸ì¦ ì˜¤ë¥˜

```yaml
# ğŸ”§ í•´ê²° ë°©ë²•: TLS ë¬´ì‹œ ì„¤ì •
args:
- --kubelet-insecure-tls
- --kubelet-preferred-address-types=InternalIP
```

#### ë¬¸ì œ 3: ê³¼ë„í•œ ìŠ¤ì¼€ì¼ë§ (Thrashing)

> [!warning] í•´ê²° ë°©ì•ˆ
> - **ì•ˆì •í™” ìœˆë„ìš° ì¦ê°€**: stabilizationWindowSeconds ì¡°ì •
> - **ìŠ¤ì¼€ì¼ë§ ì •ì±… ì¡°ì •**: behavior ì„¹ì…˜ ì„¸ë°€ ì„¤ì •
> - **ë©”íŠ¸ë¦­ í‰ê· í™”**: ë” ê¸´ ê¸°ê°„ í‰ê· ê°’ ì‚¬ìš©

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì„¤ì •

#### Grafana ëŒ€ì‹œë³´ë“œ ì¿¼ë¦¬

```promql
# HPA í˜„ì¬ ë ˆí”Œë¦¬ì¹´ ìˆ˜
kube_horizontalpodautoscaler_status_current_replicas

# HPA ëª©í‘œ ë ˆí”Œë¦¬ì¹´ ìˆ˜  
kube_horizontalpodautoscaler_status_desired_replicas

# CPU ì‚¬ìš©ë¥ 
rate(container_cpu_usage_seconds_total[5m]) * 100

# ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ 
container_memory_working_set_bytes / container_spec_memory_limit_bytes * 100
```

### ğŸ”§ ìœ ìš©í•œ ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# ğŸ“Š hpa-monitor.sh - HPA ìƒíƒœ ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸

echo "=== HPA ì „ì²´ ìƒíƒœ ==="
kubectl get hpa

echo "=== ë©”íŠ¸ë¦­ì„œë²„ ìƒíƒœ ==="
kubectl get pods -n kube-system -l k8s-app=metrics-server

echo "=== ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥  ==="
kubectl top nodes

echo "=== HPA ì´ë²¤íŠ¸ (ìµœê·¼ 10ê°œ) ==="
kubectl get events --field-selector involvedObject.kind=HorizontalPodAutoscaler --sort-by=.metadata.creationTimestamp | tail -10

# íŠ¹ì • HPA ìƒì„¸ ëª¨ë‹ˆí„°ë§
if [ ! -z "$1" ]; then
    echo "=== $1 HPA ìƒì„¸ ì •ë³´ ==="
    kubectl describe hpa $1
    
    echo "=== $1 íƒ€ê²Ÿ íŒŒë“œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥  ==="
    APP_LABEL=$(kubectl get hpa $1 -o jsonpath='{.spec.scaleTargetRef.name}')
    kubectl top pods -l app=$APP_LABEL
fi
```

---

## ğŸ¯ ì‹¤ì „ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### âœ… HPA ì„¤ê³„ ê¶Œì¥ì‚¬í•­

1. **ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì„¤ì • í•„ìˆ˜**
   ```yaml
   resources:
     requests:
       cpu: 100m      # HPA ë™ì‘ì„ ìœ„í•´ ë°˜ë“œì‹œ ì„¤ì •
       memory: 128Mi
   ```

2. **ì ì ˆí•œ ìŠ¤ì¼€ì¼ë§ ë²”ìœ„ ì„¤ì •**
   ```yaml
   minReplicas: 2    # ê°€ìš©ì„± ë³´ì¥
   maxReplicas: 50   # ë¹„ìš© í†µì œ
   ```

3. **ì•ˆì •í™” ê¸°ê°„ ì¡°ì •**
   ```yaml
   behavior:
     scaleUp:
       stabilizationWindowSeconds: 60    # ë¹ ë¥¸ í™•ì¥
     scaleDown:
       stabilizationWindowSeconds: 300   # ë³´ìˆ˜ì  ì¶•ì†Œ
   ```

### ğŸš€ í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥ ì„¤ì •

```yaml
# ğŸ“Š production-hpa-template.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: production-app-hpa
  labels:
    environment: production
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: production-app
  minReplicas: 3      # ê³ ê°€ìš©ì„±
  maxReplicas: 100    # ì¶©ë¶„í•œ í™•ì¥ì„±
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70  # ë³´ìˆ˜ì  ì„ê³„ê°’
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 120
      policies:
      - type: Percent
        value: 100    # ìµœëŒ€ 100% ì¦ê°€
        periodSeconds: 60
      - type: Pods
        value: 10     # ìµœëŒ€ 10ê°œê¹Œì§€
        periodSeconds: 60
      selectPolicy: Min
    scaleDown:
      stabilizationWindowSeconds: 600   # 10ë¶„ ëŒ€ê¸°
      policies:
      - type: Percent
        value: 10     # ì²œì²œíˆ ê°ì†Œ
        periodSeconds: 120
      selectPolicy: Min
```

> [!tip] ë§ˆë¬´ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
> - âœ… ë©”íŠ¸ë¦­ì„œë²„ ì •ìƒ ì„¤ì¹˜ í™•ì¸
> - âœ… HPA ëŒ€ìƒ ì•±ì— ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì„¤ì •
> - âœ… ì ì ˆí•œ ìŠ¤ì¼€ì¼ë§ ì •ì±… êµ¬ì„±
> - âœ… ëª¨ë‹ˆí„°ë§ ë° ì•ŒëŒ ì„¤ì •
> - âœ… ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ ê²€ì¦

---

**ğŸ“š ê´€ë ¨ ë¬¸ì„œ**
- [[k8sì‹¤ìŠµ-09-1_ë¦¬ì†ŒìŠ¤ê´€ë¦¬|ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ê¸°ì´ˆ]]
- [[k8sì‹¤ìŠµ-09-2_ëª¨ë‹ˆí„°ë§ì„¤ì •|ëª¨ë‹ˆí„°ë§ ì„¤ì •]]
- [[k8sì‹¤ìŠµ-10_ìš´ì˜ìµœì í™”|ìš´ì˜ ìµœì í™” ê°€ì´ë“œ]]

**ğŸ”— ì°¸ê³  ë§í¬**
- [Kubernetes HPA ê³µì‹ ë¬¸ì„œ](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/)
- [Metrics Server GitHub](https://github.com/kubernetes-sigs/metrics-server)