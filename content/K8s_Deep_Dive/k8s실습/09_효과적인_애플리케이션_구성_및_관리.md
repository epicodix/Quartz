---
title: ì¿ ë²„ë„¤í‹°ìŠ¤ 9ì¥ - íš¨ê³¼ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ë° ê´€ë¦¬
tags:
  - kubernetes
  - k8s
  - configmap
  - secret
  - devops
  - infrastructure
aliases:
  - K8s ConfigMap Secret
  - ì¿ ë²„ë„¤í‹°ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±
date: 2025-11-27
category: K8s_Deep_Dive/k8sì‹¤ìŠµ
status: ì™„ì„±
priority: ë†’ìŒ
---

# ğŸ¯ ì¿ ë²„ë„¤í‹°ìŠ¤ 9ì¥ - íš¨ê³¼ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ë° ê´€ë¦¬

## ğŸ“‘ ëª©ì°¨
- [[#1. ConfigMapì„ ì´ìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬|ConfigMap ì„¤ì • ê´€ë¦¬]]
- [[#2. Secretì„ ì´ìš©í•œ ë¯¼ê° ì •ë³´ ì•”í˜¸í™”|Secret ì•”í˜¸í™”]]
- [[#ğŸ¯ ì‹¤ì „ ì˜ˆì‹œ|ì‹¤ì „ ì˜ˆì‹œ]]

---

## 1. ConfigMapì„ ì´ìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬

> [!note] í•µì‹¬ ê°œë…
> ConfigMapì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ì •ë³´ë¥¼ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤.

### ğŸ’¡ ConfigMapì´ í•„ìš”í•œ ì´ìœ 

**ğŸ¤” ì§ˆë¬¸**: "ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ë¯¸ ì˜ ë™ì‘í•˜ê³  ìˆì§€ ì•Šë‚˜ìš”?"

#### ğŸ“‹ ì •í•´ì§„ ê¸¸ë¡œë§Œ ê°€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¬¸ì œì 

> [!example] ì‹¤ì œ ìƒí™©
> 1. **ë¬¸ì œ**: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì— í•˜ë“œì½”ë”©ë¨
> 2. **ê°ì§€**: í™˜ê²½ë³„(ê°œë°œ/í…ŒìŠ¤íŠ¸/ìš´ì˜) ì„¤ì • ë³€ê²½ ì‹œ ì´ë¯¸ì§€ ì¬ë¹Œë“œ í•„ìš”
> 3. **ì¡°ì¹˜**: ConfigMapìœ¼ë¡œ ì„¤ì • ì™¸ë¶€í™”
> 4. **ê²°ê³¼**: ë™ì¼ ì´ë¯¸ì§€ë¡œ ë‹¤ì–‘í•œ í™˜ê²½ ë°°í¬ ê°€ëŠ¥

### ğŸ’» ConfigMap ìƒì„± ë° ì‚¬ìš© ë°©ë²•

#### ğŸ“Š ConfigMap ìƒì„± ë°©ì‹

| ë°©ì‹ | ëª…ë ¹ì–´ | ìš©ë„ |
|------|--------|------|
| YAML íŒŒì¼ | `kubectl apply -f configmap.yaml` | ë³µì¡í•œ ì„¤ì • |
| ëª…ë ¹ì¤„ | `kubectl create configmap` | ê°„ë‹¨í•œ ì„¤ì • |
| íŒŒì¼ì—ì„œ | `--from-file` | ì„¤ì • íŒŒì¼ ì „ì²´ |

#### ğŸ“‹ ConfigMap YAML êµ¬ì¡°

```yaml
# ğŸ“Š ConfigMap-sleepy-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: sleepy-config
data:
  STATUS: "WAKE UP"
  NOTE: "TestBed Configuration"
```

#### ğŸ’» Podì—ì„œ ConfigMap ì‚¬ìš© ë°©ë²•

### 1. envFromìœ¼ë¡œ ì „ì²´ ConfigMap ì°¸ì¡°

```yaml
# ğŸ“Š deploy-configMapRef.yaml
apiVersion: apps/v1
kind: Deployment
spec:
  template:
    spec:
      containers:
      - image: sysnet4admin/sleepy
        name: sleepy
        command: ["/bin/sh","-c"]
        args:
        - |
          echo "sleepy $STATUS"
          echo "NOTE: $NOTE"
          sleep 3600
        envFrom:
        - configMapRef:
            name: sleepy-config
```

### 2. valueFromìœ¼ë¡œ íŠ¹ì • í‚¤ ì°¸ì¡°

```yaml
# ğŸ“Š deploy-configMapKeyRef.yaml
env:
- name: APP_STATUS
  valueFrom:
    configMapKeyRef:
      name: sleepy-config
      key: STATUS
```

### 3. Volume Mountë¡œ íŒŒì¼ë¡œ ë§ˆìš´íŠ¸

```yaml
# ğŸ“Š deploy-vol-configMap.yaml
volumeMounts:
- name: appconfigvol
  mountPath: /etc/sleepy.d
volumes:
- name: appconfigvol
  configMap:
    name: sleepy-config
```

---

## 2. Secretì„ ì´ìš©í•œ ë¯¼ê° ì •ë³´ ê´€ë¦¬

> [!warning] ì¤‘ìš”í•œ í˜„ì‹¤
> Secretì€ **Base64 ì¸ì½”ë”©ì¼ ë¿ ì§„ì§œ ì•”í˜¸í™”ê°€ ì•„ë‹™ë‹ˆë‹¤**. ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë” ê°•ë ¥í•œ ë³´ì•ˆ ì†”ë£¨ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ğŸ’¡ Secretì˜ í•œê³„ì™€ ì‹¤ì œ ë³´ì•ˆ

**ğŸ¤” ì§ˆë¬¸**: "ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì¤‘ìš” ì •ë³´ëŠ” ì–´ë–»ê²Œ ë„£ë‚˜ìš”? (ì˜ˆ: ì•„ì´ë””/ì•”í˜¸)"

#### ğŸ“‹ Base64ì˜ í˜„ì‹¤ì  í•œê³„

> [!danger] Base64ëŠ” ì•”í˜¸í™”ê°€ ì•„ë‹˜
> ```bash
> # ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ë””ì½”ë”© ê°€ëŠ¥
> echo "ZGItdXNlcg==" | base64 -d
> # ê²°ê³¼: db-user
> ```
> **Base64ëŠ” ë‹¨ìˆœ ì¸ì½”ë”©**ìœ¼ë¡œ ë³´ì•ˆì´ë¼ê³  í•  ìˆ˜ ì—†ìŒ

#### ğŸ›¡ï¸ ì‹¤ì œ ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜

| ë³´ì•ˆ ë ˆì´ì–´ | Secretì˜ ì‹¤ì œ ë³´í˜¸ ë°©ì‹ |
|-------------|------------------------|
| **etcd ì•”í˜¸í™”** | í´ëŸ¬ìŠ¤í„° ë ˆë²¨ì—ì„œ AES ì•”í˜¸í™” |
| **ì „ì†¡ ì•”í˜¸í™”** | TLSë¡œ API í†µì‹  ë³´í˜¸ |
| **ì ‘ê·¼ ì œì–´** | RBACë¡œ ê¶Œí•œ ê´€ë¦¬ |
| **ë©”ëª¨ë¦¬ ì €ì¥** | tmpfsì—ë§Œ ë§ˆìš´íŠ¸ (ë””ìŠ¤í¬ ì €ì¥ X) |

### ğŸ’» Secret ìƒì„± ë° ì‚¬ìš© ë°©ë²•

#### ğŸ“Š Secret ë¹ŒíŠ¸ì¸ íƒ€ì…

| íƒ€ì… | ì‚¬ìš©ì²˜ |
|------|--------|
| Opaque | ì„ì˜ì˜ ì‚¬ìš©ì ì •ì˜ ë°ì´í„° |
| kubernetes.io/service-account-token | ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ í† í° |
| kubernetes.io/dockercfg | Docker ì„¤ì • íŒŒì¼ |
| kubernetes.io/basic-auth | ê¸°ë³¸ ì¸ì¦ ìê²© ì¦ëª… |
| kubernetes.io/ssh-auth | SSH ìê²© ì¦ëª… |
| kubernetes.io/tls | TLS í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ë°ì´í„° |

#### ğŸ“‹ Secret ìƒì„± ë°©ë²•

```bash
# ëª…ë ¹ì¤„ë¡œ Secret ìƒì„±
kubectl create secret generic mysql-cred \
  --from-literal=username='db-user' \
  --from-literal=password='hoon'
```

```yaml
# ğŸ“Š secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysql-cred
  namespace: default
data:
  username: ZGItdXNlcg==  # Base64: db-user
  password: aG9vbg==      # Base64: hoon
type: Opaque
```

#### ğŸ’» Podì—ì„œ Secret ì‚¬ìš©

```yaml
# ğŸ“Š deploy-secretKeyRef-w-pvc.yaml
env:
# MySQL ì´ˆê¸°í™”ìš©
- name: MYSQL_ROOT_PASSWORD
  value: rootpassword
# Secretì—ì„œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
- name: MYSQL_USER_ID
  valueFrom:
    secretKeyRef:
      name: mysql-cred
      key: username
- name: MYSQL_USER_PASSWORD
  valueFrom:
    secretKeyRef:
      name: mysql-cred
      key: password
```

### âš™ï¸ Immutable Secretê³¼ ConfigMap

> [!warning] ì¤‘ìš” ê¸°ëŠ¥
> `immutable: true` ì„¤ì •ìœ¼ë¡œ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ Secret/ConfigMap ìƒì„± ê°€ëŠ¥

#### ğŸ“‹ Immutableì˜ ì¥ì 

> [!tip] ì„±ëŠ¥ ë° ì•ˆì •ì„± í–¥ìƒ
> 1. **ë³´í˜¸**: ìš°ë°œì  ì—…ë°ì´íŠ¸ë¡œë¶€í„° ë³´í˜¸
> 2. **ì„±ëŠ¥**: kube-apiserver ë¶€í•˜ ê°ì†Œë¡œ í´ëŸ¬ìŠ¤í„° ì„±ëŠ¥ í–¥ìƒ

```yaml
# ğŸ“Š secrets-immutable.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysql-cred
data:
  username: ZGItdXNlcg==
  password: aG9vbg==
type: Opaque
immutable: true  # ë³€ê²½ ë¶ˆê°€ëŠ¥ ì„¤ì •
```

### ğŸ­ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³´ì•ˆ ì†”ë£¨ì…˜

> [!tip] ìš´ì˜ í™˜ê²½ ê¶Œì¥ì‚¬í•­
> ì¿ ë²„ë„¤í‹°ìŠ¤ ë„¤ì´í‹°ë¸Œ Secretì€ **í•™ìŠµìš©/ê°œë°œìš©**ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ê³ , ì‹¤ì œ ìš´ì˜ì—ì„œëŠ” ì „ë¬¸ ë³´ì•ˆ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

#### ğŸ“Š ì‹¤ë¬´ì—ì„œ ì‚¬ìš©ë˜ëŠ” Secret ê´€ë¦¬ ë„êµ¬

| ì†”ë£¨ì…˜ | íŠ¹ì§• | ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ |
|--------|------|--------------|
| **Sealed Secrets** | ê³µê°œí‚¤ ì•”í˜¸í™”, GitOps ì¹œí™”ì  | CI/CD íŒŒì´í”„ë¼ì¸ |
| **External Secrets Operator** | ì™¸ë¶€ Vault ì—°ë™ | AWS/Azure/GCP ë„¤ì´í‹°ë¸Œ |
| **Helm Secrets** | sops/age ì•”í˜¸í™” | Helm ì°¨íŠ¸ ë°°í¬ |
| **HashiCorp Vault** | ì „ë¬¸ ë¹„ë°€ ê´€ë¦¬ | ì—”í„°í”„ë¼ì´ì¦ˆ í™˜ê²½ |
| **AWS Secrets Manager** | AWS ë„¤ì´í‹°ë¸Œ | AWS í™˜ê²½ |
| **Azure Key Vault** | Azure ë„¤ì´í‹°ë¸Œ | Azure í™˜ê²½ |

#### ğŸ’» External Secrets Operator ì˜ˆì‹œ

```yaml
# ì‹¤ì œ ìš´ì˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: aws-secrets-manager
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1
      auth:
        secretRef:
          accessKeyID:
            name: awssm-secret
            key: access-key
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: mysql-credentials
spec:
  refreshInterval: 15s
  secretStoreRef:
    name: aws-secrets-manager
    kind: SecretStore
  target:
    name: mysql-cred
    creationPolicy: Owner
  data:
  - secretKey: username
    remoteRef:
      key: /mysql/credentials
      property: username
  - secretKey: password
    remoteRef:
      key: /mysql/credentials
      property: password
```

#### ğŸ”§ Sealed Secrets ì˜ˆì‹œ

```bash
# Sealed Secrets ì„¤ì¹˜
kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.18.0/controller.yaml

# ì¼ë°˜ Secretì„ Sealed Secretìœ¼ë¡œ ë³€í™˜
echo -n mypassword | kubectl create secret generic mysecret --dry-run=client --from-file=password=/dev/stdin -o yaml | kubeseal -o yaml > mysealedsecret.yaml

# Gitì— ì•ˆì „í•˜ê²Œ ì»¤ë°‹ ê°€ëŠ¥í•œ ì•”í˜¸í™”ëœ Secret
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: mysecret
spec:
  encryptedData:
    password: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEQAx...
```

> [!warning] í˜„ì‹¤ì  ì¡°ì–¸
> - **í•™ìŠµ/ê°œë°œ**: ì¿ ë²„ë„¤í‹°ìŠ¤ ë„¤ì´í‹°ë¸Œ Secret ì‚¬ìš©
> - **ìŠ¤í…Œì´ì§•**: Sealed Secretsë‚˜ External Secrets ë„ì…  
> - **ìš´ì˜í™˜ê²½**: ë°˜ë“œì‹œ ì „ë¬¸ Key Management Service ì‚¬ìš©

---

## ğŸ¯ ì‹¤ì „ ì˜ˆì‹œ

### ğŸ’¡ í˜„ì‹¤ì ì¸ ë³´ì•ˆ ìˆ˜ì¤€ ë¹„êµ

| êµ¬ë¶„ | ConfigMap | K8s Native Secret | External Secrets |
|------|-----------|-------------------|------------------|
| ìš©ë„ | ì¼ë°˜ ì„¤ì • ì •ë³´ | ê°œë°œ/í•™ìŠµìš© ë¯¼ê° ì •ë³´ | ìš´ì˜ìš© ë¯¼ê° ì •ë³´ |
| ì €ì¥ ë°©ì‹ | í‰ë¬¸ | Base64 ì¸ì½”ë”© (ë””ì½”ë”© ì‰¬ì›€) | ì‹¤ì œ ì•”í˜¸í™” |
| ì‹¤ì œ ë³´ì•ˆ ìˆ˜ì¤€ | ë‚®ìŒ | **ë‚®ìŒ** (ì°©ê°í•˜ê¸° ì‰¬ì›€) | ë†’ìŒ |
| Git ì €ì¥ ê°€ëŠ¥ì„± | ê°€ëŠ¥ | **ìœ„í—˜í•¨** | ì•ˆì „í•¨ (ì•”í˜¸í™”ë¨) |
| ì‚¬ìš© í™˜ê²½ | ëª¨ë“  í™˜ê²½ | ê°œë°œ/í…ŒìŠ¤íŠ¸ë§Œ | ìŠ¤í…Œì´ì§•/ìš´ì˜ |

### ğŸ“‹ ì‹¤ìŠµ íŒŒì¼ êµ¬ì¡°

```
ch9/9.2/  # ConfigMap ì‹¤ìŠµ
â”œâ”€â”€ ConfigMap-sleepy-config.yaml
â”œâ”€â”€ ConfigMap-sleepy-config-chg.yaml
â”œâ”€â”€ deploy-configMapRef.yaml
â”œâ”€â”€ deploy-configMapKeyRef.yaml
â””â”€â”€ deploy-vol-configMap.yaml

ch9/9.3/  # Secret ì‹¤ìŠµ  
â”œâ”€â”€ secrets.yaml
â”œâ”€â”€ secrets-immutable.yaml
â””â”€â”€ deploy-secretKeyRef-w-pvc.yaml
```

### ğŸ”§ ì£¼ìš” ì‹¤ìŠµ ëª…ë ¹ì–´

```bash
# ConfigMap ìƒì„±
kubectl apply -f ConfigMap-sleepy-config.yaml

# ConfigMapì„ ì‚¬ìš©í•˜ëŠ” Deployment ë°°í¬
kubectl apply -f deploy-configMapRef.yaml

# Secret ìƒì„±
kubectl create secret generic mysql-cred \
  --from-literal=username='db-user' \
  --from-literal=password='hoon'

# Secretì„ ì‚¬ìš©í•˜ëŠ” MySQL Deployment ë°°í¬
kubectl apply -f deploy-secretKeyRef-w-pvc.yaml

# ConfigMap/Secret í™•ì¸
kubectl get configmap
kubectl get secret
kubectl describe secret mysql-cred
```

> [!tip] ë‹¤ìŒ ê°•ì˜ ì˜ˆê³ 
> **9.4 ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡¤ë§ ì—…ë°ì´íŠ¸**
> - `kubectl set` ëª…ë ¹ì–´ í™œìš©
> - `kubectl rollout` ëª…ë ¹ì–´ë¡œ ë°°í¬ ê´€ë¦¬