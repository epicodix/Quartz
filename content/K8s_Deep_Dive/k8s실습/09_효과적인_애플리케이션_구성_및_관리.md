---
title: ì¿ ë²„ë„¤í‹°ìŠ¤ 9ì¥ - íš¨ê³¼ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ë° ê´€ë¦¬
tags:
  - kubernetes
  - k8s
  - configmap
  - secret
  - devops
  - infrastructure
aliases:
  - K8s ConfigMap Secret
  - ì¿ ë²„ë„¤í‹°ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±
date: 2025-11-27
category: K8s_Deep_Dive/k8sì‹¤ìŠµ
status: ì™„ì„±
priority: ë†’ìŒ
---

# ğŸ¯ ì¿ ë²„ë„¤í‹°ìŠ¤ 9ì¥ - íš¨ê³¼ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ë° ê´€ë¦¬

## ğŸ“‘ ëª©ì°¨
- [[#1. ConfigMapì„ ì´ìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬|ConfigMap ì„¤ì • ê´€ë¦¬]]
- [[#2. Secretì„ ì´ìš©í•œ ë¯¼ê° ì •ë³´ ì•”í˜¸í™”|Secret ì•”í˜¸í™”]]
- [[#ğŸ¯ ì‹¤ì „ ì˜ˆì‹œ|ì‹¤ì „ ì˜ˆì‹œ]]

---

## 1. ConfigMapì„ ì´ìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬

> [!note] í•µì‹¬ ê°œë…
> ConfigMapì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ì •ë³´ë¥¼ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤.

### ğŸ’¡ ConfigMapì´ í•„ìš”í•œ ì´ìœ 

**ğŸ¤” ì§ˆë¬¸**: "ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ë¯¸ ì˜ ë™ì‘í•˜ê³  ìˆì§€ ì•Šë‚˜ìš”?"

#### ğŸ“‹ ì •í•´ì§„ ê¸¸ë¡œë§Œ ê°€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¬¸ì œì 

> [!example] ì‹¤ì œ ìƒí™©
> 1. **ë¬¸ì œ**: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì— í•˜ë“œì½”ë”©ë¨
> 2. **ê°ì§€**: í™˜ê²½ë³„(ê°œë°œ/í…ŒìŠ¤íŠ¸/ìš´ì˜) ì„¤ì • ë³€ê²½ ì‹œ ì´ë¯¸ì§€ ì¬ë¹Œë“œ í•„ìš”
> 3. **ì¡°ì¹˜**: ConfigMapìœ¼ë¡œ ì„¤ì • ì™¸ë¶€í™”
> 4. **ê²°ê³¼**: ë™ì¼ ì´ë¯¸ì§€ë¡œ ë‹¤ì–‘í•œ í™˜ê²½ ë°°í¬ ê°€ëŠ¥

### ğŸ’» ConfigMap ìƒì„± ë° ì‚¬ìš© ë°©ë²•

#### ğŸ“Š ConfigMap ìƒì„± ë°©ì‹

| ë°©ì‹ | ëª…ë ¹ì–´ | ìš©ë„ |
|------|--------|------|
| YAML íŒŒì¼ | `kubectl apply -f configmap.yaml` | ë³µì¡í•œ ì„¤ì • |
| ëª…ë ¹ì¤„ | `kubectl create configmap` | ê°„ë‹¨í•œ ì„¤ì • |
| íŒŒì¼ì—ì„œ | `--from-file` | ì„¤ì • íŒŒì¼ ì „ì²´ |

#### ğŸ“‹ ConfigMap YAML êµ¬ì¡°

```yaml
# ğŸ“Š ConfigMap-sleepy-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: sleepy-config
data:
  STATUS: "WAKE UP"
  NOTE: "TestBed Configuration"
```

#### ğŸ’» Podì—ì„œ ConfigMap ì‚¬ìš© ë°©ë²•

### 1. envFromìœ¼ë¡œ ì „ì²´ ConfigMap ì°¸ì¡°

```yaml
# ğŸ“Š deploy-configMapRef.yaml
apiVersion: apps/v1
kind: Deployment
spec:
  template:
    spec:
      containers:
      - image: sysnet4admin/sleepy
        name: sleepy
        command: ["/bin/sh","-c"]
        args:
        - |
          echo "sleepy $STATUS"
          echo "NOTE: $NOTE"
          sleep 3600
        envFrom:
        - configMapRef:
            name: sleepy-config
```

### 2. valueFromìœ¼ë¡œ íŠ¹ì • í‚¤ ì°¸ì¡°

```yaml
# ğŸ“Š deploy-configMapKeyRef.yaml
env:
- name: APP_STATUS
  valueFrom:
    configMapKeyRef:
      name: sleepy-config
      key: STATUS
```

### 3. Volume Mountë¡œ íŒŒì¼ë¡œ ë§ˆìš´íŠ¸

```yaml
# ğŸ“Š deploy-vol-configMap.yaml
volumeMounts:
- name: appconfigvol
  mountPath: /etc/sleepy.d
volumes:
- name: appconfigvol
  configMap:
    name: sleepy-config
```

---

## 2. Secretì„ ì´ìš©í•œ ë¯¼ê° ì •ë³´ ì•”í˜¸í™”

> [!note] í•µì‹¬ ê°œë…
> Secretì€ íŒ¨ìŠ¤ì›Œë“œ, OAuth í† í°, SSH í‚¤ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ Base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤.

### ğŸ’¡ Secretì´ í•„ìš”í•œ ì´ìœ 

**ğŸ¤” ì§ˆë¬¸**: "ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì¤‘ìš” ì •ë³´ëŠ” ì–´ë–»ê²Œ ë„£ë‚˜ìš”? (ì˜ˆ: ì•„ì´ë””/ì•”í˜¸)"

#### ğŸ“‹ ì¤‘ìš” ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•

> [!example] MySQL ì¸ì¦ ì‹œë‚˜ë¦¬ì˜¤
> 1. **ë¬¸ì œ**: ë°ì´í„°ë² ì´ìŠ¤ ì¸ì¦ ì •ë³´ë¥¼ í‰ë¬¸ìœ¼ë¡œ ì €ì¥
> 2. **ê°ì§€**: ë³´ì•ˆ ì·¨ì•½ì  ë°œìƒ 
> 3. **ì¡°ì¹˜**: Secretìœ¼ë¡œ ì¸ì¦ ì •ë³´ ì•”í˜¸í™”
> 4. **ê²°ê³¼**: Base64 ì¸ì½”ë”©ëœ ì•ˆì „í•œ ì €ì¥

### ğŸ’» Secret ìƒì„± ë° ì‚¬ìš© ë°©ë²•

#### ğŸ“Š Secret ë¹ŒíŠ¸ì¸ íƒ€ì…

| íƒ€ì… | ì‚¬ìš©ì²˜ |
|------|--------|
| Opaque | ì„ì˜ì˜ ì‚¬ìš©ì ì •ì˜ ë°ì´í„° |
| kubernetes.io/service-account-token | ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ í† í° |
| kubernetes.io/dockercfg | Docker ì„¤ì • íŒŒì¼ |
| kubernetes.io/basic-auth | ê¸°ë³¸ ì¸ì¦ ìê²© ì¦ëª… |
| kubernetes.io/ssh-auth | SSH ìê²© ì¦ëª… |
| kubernetes.io/tls | TLS í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ë°ì´í„° |

#### ğŸ“‹ Secret ìƒì„± ë°©ë²•

```bash
# ëª…ë ¹ì¤„ë¡œ Secret ìƒì„±
kubectl create secret generic mysql-cred \
  --from-literal=username='db-user' \
  --from-literal=password='hoon'
```

```yaml
# ğŸ“Š secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysql-cred
  namespace: default
data:
  username: ZGItdXNlcg==  # Base64: db-user
  password: aG9vbg==      # Base64: hoon
type: Opaque
```

#### ğŸ’» Podì—ì„œ Secret ì‚¬ìš©

```yaml
# ğŸ“Š deploy-secretKeyRef-w-pvc.yaml
env:
# MySQL ì´ˆê¸°í™”ìš©
- name: MYSQL_ROOT_PASSWORD
  value: rootpassword
# Secretì—ì„œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
- name: MYSQL_USER_ID
  valueFrom:
    secretKeyRef:
      name: mysql-cred
      key: username
- name: MYSQL_USER_PASSWORD
  valueFrom:
    secretKeyRef:
      name: mysql-cred
      key: password
```

### âš™ï¸ Immutable Secretê³¼ ConfigMap

> [!warning] ì¤‘ìš” ê¸°ëŠ¥
> `immutable: true` ì„¤ì •ìœ¼ë¡œ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ Secret/ConfigMap ìƒì„± ê°€ëŠ¥

#### ğŸ“‹ Immutableì˜ ì¥ì 

> [!tip] ì„±ëŠ¥ ë° ì•ˆì •ì„± í–¥ìƒ
> 1. **ë³´í˜¸**: ìš°ë°œì  ì—…ë°ì´íŠ¸ë¡œë¶€í„° ë³´í˜¸
> 2. **ì„±ëŠ¥**: kube-apiserver ë¶€í•˜ ê°ì†Œë¡œ í´ëŸ¬ìŠ¤í„° ì„±ëŠ¥ í–¥ìƒ

```yaml
# ğŸ“Š secrets-immutable.yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysql-cred
data:
  username: ZGItdXNlcg==
  password: aG9vbg==
type: Opaque
immutable: true  # ë³€ê²½ ë¶ˆê°€ëŠ¥ ì„¤ì •
```

---

## ğŸ¯ ì‹¤ì „ ì˜ˆì‹œ

### ğŸ’¡ ConfigMap vs Secret ë¹„êµ

| êµ¬ë¶„ | ConfigMap | Secret |
|------|-----------|--------|
| ìš©ë„ | ì¼ë°˜ ì„¤ì • ì •ë³´ | ë¯¼ê° ì •ë³´ |
| ì €ì¥ ë°©ì‹ | í‰ë¬¸ | Base64 ì¸ì½”ë”© |
| ë³´ì•ˆ ìˆ˜ì¤€ | ë‚®ìŒ | ë†’ìŒ |
| ì‚¬ìš© ì˜ˆì‹œ | ì•± ì„¤ì •, í™˜ê²½ë³€ìˆ˜ | íŒ¨ìŠ¤ì›Œë“œ, API í‚¤ |

### ğŸ“‹ ì‹¤ìŠµ íŒŒì¼ êµ¬ì¡°

```
ch9/9.2/  # ConfigMap ì‹¤ìŠµ
â”œâ”€â”€ ConfigMap-sleepy-config.yaml
â”œâ”€â”€ ConfigMap-sleepy-config-chg.yaml
â”œâ”€â”€ deploy-configMapRef.yaml
â”œâ”€â”€ deploy-configMapKeyRef.yaml
â””â”€â”€ deploy-vol-configMap.yaml

ch9/9.3/  # Secret ì‹¤ìŠµ  
â”œâ”€â”€ secrets.yaml
â”œâ”€â”€ secrets-immutable.yaml
â””â”€â”€ deploy-secretKeyRef-w-pvc.yaml
```

### ğŸ”§ ì£¼ìš” ì‹¤ìŠµ ëª…ë ¹ì–´

```bash
# ConfigMap ìƒì„±
kubectl apply -f ConfigMap-sleepy-config.yaml

# ConfigMapì„ ì‚¬ìš©í•˜ëŠ” Deployment ë°°í¬
kubectl apply -f deploy-configMapRef.yaml

# Secret ìƒì„±
kubectl create secret generic mysql-cred \
  --from-literal=username='db-user' \
  --from-literal=password='hoon'

# Secretì„ ì‚¬ìš©í•˜ëŠ” MySQL Deployment ë°°í¬
kubectl apply -f deploy-secretKeyRef-w-pvc.yaml

# ConfigMap/Secret í™•ì¸
kubectl get configmap
kubectl get secret
kubectl describe secret mysql-cred
```

> [!tip] ë‹¤ìŒ ê°•ì˜ ì˜ˆê³ 
> **9.4 ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡¤ë§ ì—…ë°ì´íŠ¸**
> - `kubectl set` ëª…ë ¹ì–´ í™œìš©
> - `kubectl rollout` ëª…ë ¹ì–´ë¡œ ë°°í¬ ê´€ë¦¬