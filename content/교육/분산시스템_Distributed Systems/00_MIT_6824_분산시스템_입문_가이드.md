# MIT 6.824 ë¶„ì‚° ì‹œìŠ¤í…œ ì…ë¬¸: ê°œë°œìë¥¼ ìœ„í•œ í•µì‹¬ ê°œë… ì •ë¦¬

## ë©”íƒ€ë°ì´í„°
- ì‘ì„±ì¼: 2024-11-15
- ì¹´í…Œê³ ë¦¬: #ë¶„ì‚°ì‹œìŠ¤í…œ #MIT6824 #ì»´í“¨í„°ê³¼í•™ #ì•„í‚¤í…ì²˜
- íƒœê·¸: #MapReduce #Raft #Concurrency #ì‹œìŠ¤í…œì„¤ê³„
- ì°¸ê³ : MIT 6.824 Distributed Systems ê°•ì˜
- https://youtu.be/gA4YXUJX7t8?si=6uhGq2oyNgaRGBeA

---

## ğŸ“Œ ì„œë¡ : ì™œ ë¶„ì‚° ì‹œìŠ¤í…œì„ ë°°ì›Œì•¼ í•˜ëŠ”ê°€?

í˜„ëŒ€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìì—ê²Œ ë¶„ì‚° ì‹œìŠ¤í…œì€ ì„ íƒì´ ì•„ë‹Œ í•„ìˆ˜ì…ë‹ˆë‹¤. Netflix, YouTube, Amazon ê°™ì€ ì„œë¹„ìŠ¤ëŠ” ëª¨ë‘ ìˆ˜ì²œ ëŒ€ì˜ ì„œë²„ê°€ í˜‘ë ¥í•˜ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶„ì‚° ì‹œìŠ¤í…œì€ ë‹¨ìˆœíˆ "ì„œë²„ë¥¼ ë§ì´ ì“°ëŠ” ê²ƒ"ì´ ì•„ë‹™ë‹ˆë‹¤. ê·¸ ì•ˆì—ëŠ” ì¼ê´€ì„±, ë‚´ê²°í•¨ì„±, í™•ì¥ì„±ì´ë¼ëŠ” ê·¼ë³¸ì ì¸ ë¬¸ì œë“¤ê³¼ ê·¸ í•´ê²°ì±…ì´ ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ Part 1: ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë³¸ì§ˆ

### 1.1 ë¶„ì‚° ì‹œìŠ¤í…œ ì •ì˜

> **ë¶„ì‚° ì‹œìŠ¤í…œ**: ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°ë˜ì–´ ìì›ì„ ê³µìœ í•˜ê³ , ì‚¬ìš©ìì—ê²ŒëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ì—¬ëŸ¬ ë…ë¦½ì ì¸ ì»´í“¨í„°ë¡œ êµ¬ì„±ëœ ì‹œìŠ¤í…œ

#### ì¼ìƒì ì¸ ì˜ˆì‹œ
- **ë‹¨ì¼ ì‹œìŠ¤í…œ**: ê°œì¸ ë…¸íŠ¸ë¶ì˜ ì›¹ ì„œë²„, 1ëŒ€ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„
- **ë¶„ì‚° ì‹œìŠ¤í…œ**: Google ê²€ìƒ‰, Netflix ìŠ¤íŠ¸ë¦¬ë°, Kubernetes í´ëŸ¬ìŠ¤í„°, ì˜¨ë¼ì¸ ë±…í‚¹

#### í•µì‹¬ íŠ¹ì§•
- **ë³µì œ(Replication)**: ë™ì¼í•œ ë°ì´í„°ë‚˜ ì„œë¹„ìŠ¤ê°€ ì—¬ëŸ¬ ë¨¸ì‹ ì— ë³µì‚¬
- **íˆ¬ëª…ì„±(Transparency)**: ì‚¬ìš©ìëŠ” ë¶„ì‚° êµ¬ì¡°ë¥¼ ì•Œ í•„ìš” ì—†ìŒ
- **ë…ë¦½ì  ì‹¤íŒ¨**: í•œ ë¶€ë¶„ ê³ ì¥ ì‹œì—ë„ ì „ì²´ ì‹œìŠ¤í…œ ê³„ì† ë™ì‘

### 1.2 ë¶„ì‚° ì‹œìŠ¤í…œì„ ë§Œë“œëŠ” ì´ìœ 

#### ëª©í‘œ 1: í™•ì¥ ê°€ëŠ¥í•œ ì„±ëŠ¥ (Scalable Performance)
```
ìˆ˜í‰ í™•ì¥ì˜ ìœ„ë ¥:
1ëŒ€ ì„œë²„:    10,000 req/sec
10ëŒ€ ì„œë²„:   100,000 req/sec  (10ë°°)
100ëŒ€ ì„œë²„:  1,000,000 req/sec (100ë°°)

í•µì‹¬: ë¨¸ì‹ ì„ ì¶”ê°€í•˜ë©´ ì„±ëŠ¥ì´ ì„ í˜•ì ìœ¼ë¡œ ì¦ê°€
```

#### ëª©í‘œ 2: ë‚´ê²°í•¨ì„± (Fault Tolerance)
```
Murphy's Lawì˜ í˜„ì‹¤:
- ì„œë²„ 1ëŒ€ ì—°ê°„ ì¥ì• ìœ¨: 1%
- 1000ëŒ€ ì‹œìŠ¤í…œ: í•­ìƒ 10ëŒ€ ì •ë„ëŠ” ê³ ì¥
- "ì •ìƒ ìƒíƒœ = ì¼ë¶€ ê³ ì¥" ê°€ì • í•„ìš”

ê°€ìš©ì„± ê°œì„ :
ë‹¨ì¼ ì„œë²„ (99%): ì—°ê°„ 3.65ì¼ ë‹¤ìš´
3ëŒ€ ë³µì œ (ê° 99%): ì—°ê°„ 32ì´ˆ ë‹¤ìš´
```

#### ëª©í‘œ 3: ë¬¼ë¦¬ì  ì œì•½ ê·¹ë³µ
```
ì§€ë¦¬ì  ë¶„ì‚° ì˜ˆì‹œ:
ì„œìš¸ ìœ ì € â†’ ë¯¸êµ­ ì„œë²„: 200ms ì§€ì—°
ì„œìš¸ ìœ ì € â†’ ì„œìš¸ ì„œë²„: 5ms ì§€ì—°

í•´ê²°ì±…: ê° ëŒ€ë¥™ë§ˆë‹¤ ì„œë²„ ë°°ì¹˜ (CDN, Edge Computing)
```

### 1.3 ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì–´ë ¤ì›€

#### í•¨ì • 1: ë„¤íŠ¸ì›Œí¬ëŠ” ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤
```python
# ê°œë°œìì˜ ì°©ê°
def send_message(data):
    network.send(data)
    # ë‹¹ì—°íˆ ë„ì°©í–ˆê² ì§€? â† ìœ„í—˜í•œ ê°€ì •!

# ì‹¤ì œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤
- íŒ¨í‚· ì†ì‹¤ (Packet Loss)
- íŒ¨í‚· ìˆœì„œ ë°”ë€œ (Reordering)
- ë„¤íŠ¸ì›Œí¬ ë¶„í•  (Network Partition)
- ì§€ì—° ê¸‰ì¦ (Latency Spike)
- ì¤‘ë³µ ì „ì†¡ (Duplicate Delivery)
```

#### í•¨ì • 2: ì§€ì—° ì‹œê°„ì˜ í˜„ì‹¤
```
ì§€ì—° ì‹œê°„ ë¹„êµ:
- ê°™ì€ ë°ì´í„°ì„¼í„°: 0.5ms
- ë‹¤ë¥¸ ê°€ìš© ì˜ì—­: 5ms
- ëŒ€ë¥™ ê°„ (í•œêµ­-ë¯¸êµ­): 150ms
- ìœ„ì„± í†µì‹ : 500ms

í•¨ì •: ì½”ë“œìƒìœ¼ë¡œëŠ” ë™ì¼í•´ ë³´ì´ì§€ë§Œ...
local_result = get_user(user_id)        # 0.001ms
remote_result = get_user_rpc(user_id)   # 150ms â† 150,000ë°° ëŠë¦¼!
```

#### í•¨ì • 3: ë¶€ë¶„ ì‹¤íŒ¨ (Partial Failure)
```
ë‹¨ì¼ ì‹œìŠ¤í…œ: í”„ë¡œì„¸ìŠ¤ ì£½ìŒ â†’ ì „ì²´ ì¤‘ë‹¨ (ëª…í™•)

ë¶„ì‚° ì‹œìŠ¤í…œ:
- ì„œë²„ A: ì •ìƒ
- ì„œë²„ B: ë„¤íŠ¸ì›Œí¬ ëŠê¹€ (ì£½ì€ì§€ ëŠë¦°ì§€ ë¶ˆëª…)
- ì„œë²„ C: ë””ìŠ¤í¬ í’€
- ì„œë²„ D: CPU 100% (ëŠë¦¼)

â†’ ë¶€ë¶„ì  ì‹¤íŒ¨ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë‹¤ë£° ê²ƒì¸ê°€?
```

---

## ğŸ› ï¸ Part 2: MapReduce - ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì²« ë²ˆì§¸ êµí›ˆ

### 2.1 MapReduce íƒ„ìƒ ë°°ê²½

**Googleì˜ 2004ë…„ ë¬¸ì œ:**
- ì‘ì—…: ì „ì²´ ì›¹ í˜ì´ì§€ ì¸ë±ì‹±
- ë°ì´í„°: ìˆ˜ í…Œë¼ë°”ì´íŠ¸
- ìš”êµ¬ì‚¬í•­: ë§¤ì¼ ë°¤ ì²˜ë¦¬ ì™„ë£Œ
- ë‹¨ì¼ ì„œë²„ë¡œëŠ” ìˆ˜ê°œì›” ì†Œìš”

**í•´ê²°ì±…**: ìˆ˜ì²œ ëŒ€ ì„œë²„ë¡œ ë³‘ë ¬ ì²˜ë¦¬
**ìƒˆ ë¬¸ì œ**: ë§¤ë²ˆ ë¶„ì‚° ì²˜ë¦¬ ì½”ë“œì™€ ì¥ì•  ì²˜ë¦¬ ë¡œì§ êµ¬í˜„?

### 2.2 MapReduceì˜ í•µì‹¬: ì¶”ìƒí™”ì˜ í˜

```python
# í”„ë¡œê·¸ë˜ë¨¸ëŠ” ë‘ í•¨ìˆ˜ë§Œ êµ¬í˜„
class WordCount:
    def map(self, document):
        """ê° ë‹¨ì–´ë¥¼ (ë‹¨ì–´, 1) í˜•íƒœë¡œ ì¶œë ¥"""
        for word in document.split():
            emit(word, 1)
    
    def reduce(self, word, counts):
        """ê°™ì€ ë‹¨ì–´ì˜ ì¹´ìš´íŠ¸ë¥¼ í•©ì‚°"""
        emit(word, sum(counts))

# í”„ë ˆì„ì›Œí¬ê°€ ìë™ ì²˜ë¦¬í•˜ëŠ” ê²ƒë“¤:
# - ë°ì´í„° ë¶„í•  ë° ë¶„ì‚°
# - ë„¤íŠ¸ì›Œí¬ í†µì‹ 
# - ì¥ì•  ì²˜ë¦¬ ë° ì¬ì‹œë„  
# - ê²°ê³¼ ìˆ˜ì§‘
```

### 2.3 MapReduce ì‹¤í–‰ ê³¼ì •

```
1. [ì…ë ¥ ë¶„í• ]
   1TB ë°ì´í„° â†’ 10,000ê°œ chunk (ê° 100MB) â†’ 10,000ê°œ Worker

2. [Map Phase]
   Worker 1: "hello" â†’ (hello, 1), "world" â†’ (world, 1)
   Worker 2: "hello" â†’ (hello, 1), ...

3. [Shuffle Phase] â† ìë™ ì²˜ë¦¬
   ê°™ì€ í‚¤ â†’ ê°™ì€ Reducerë¡œ ì „ì†¡
   "hello" â†’ [1,1,1,...] â†’ Reducer 1
   "world" â†’ [1,1,1,...] â†’ Reducer 2

4. [Reduce Phase]
   Reducer 1: "hello" â†’ 1,523,456
   Reducer 2: "world" â†’ 987,234
```

### 2.4 MapReduceì˜ ë‚´ê²°í•¨ì„±

**ì¥ì•  ì²˜ë¦¬ ì›ì¹™:**
1. Masterê°€ ëª¨ë“  Worker ìƒíƒœ ì¶”ì  (heartbeat)
2. ì¥ì•  ê°ì§€ ì‹œ ë¯¸ì™„ë£Œ ì‘ì—… ì¬í• ë‹¹
3. **ì¤‘ìš”**: Map ì‘ì—…ì€ ì™„ë£Œë˜ì–´ë„ ì¬ì‹¤í–‰ í•„ìš”
   - ì´ìœ : ì¤‘ê°„ ê²°ê³¼ê°€ í•´ë‹¹ Worker ë¡œì»¬ ë””ìŠ¤í¬ì— ìˆìŒ
   - Reducerê°€ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ë‹¤ë¥¸ Workerì—ì„œ ì¬ì‹¤í–‰

**í•µì‹¬ ìš”êµ¬ì‚¬í•­**: Map/Reduce í•¨ìˆ˜ëŠ” ë©±ë“±ì„±(Idempotent) í•„ìˆ˜

### 2.5 MapReduceì˜ íŠ¸ë ˆì´ë“œì˜¤í”„

**ì¥ì :**
- âœ… í”„ë¡œê·¸ë˜ë° ë‹¨ìˆœí•¨ (ë‘ í•¨ìˆ˜ë§Œ ì‘ì„±)
- âœ… ìë™ ì¥ì•  ì²˜ë¦¬
- âœ… ì„ í˜• í™•ì¥ì„± (ë¨¸ì‹  2ë°° â†’ ì†ë„ 2ë°°)
- âœ… ë¡œì»¬ë¦¬í‹° ìµœì í™” (ë°ì´í„° ìˆëŠ” ê³³ì—ì„œ ê³„ì‚°)

**ë‹¨ì :**
- âŒ ì¼ê´„ ì²˜ë¦¬ë§Œ ê°€ëŠ¥ (ì‹¤ì‹œê°„ ì²˜ë¦¬ ë¶ˆê°€)
- âŒ ë°˜ë³µ ì‘ì—… ë¹„íš¨ìœ¨ (ë§¤ë²ˆ ë””ìŠ¤í¬ I/O)
- âŒ ë†’ì€ ì§€ì—° ì‹œê°„ (ëª¨ë“  Map ì™„ë£Œê¹Œì§€ Reduce ëŒ€ê¸°)
- âŒ ë°ì´í„° ì‹ ì„ ë„ í¬ìƒ (ëª‡ ì‹œê°„ ì§€ì—°)

**ì‹¤ë¬´ ì ìš©:**
```
ì í•©: ë¡œê·¸ ë¶„ì„, ì›¹ í¬ë¡¤ë§ ì¸ë±ì‹±, ì¼ì¼ ë¦¬í¬íŠ¸
ë¶€ì í•©: ì‹¤ì‹œê°„ ì¶”ì²œ, ì£¼ì‹ ê±°ë˜, ì±„íŒ… ì•±
â†’ ì´í›„ Spark, Flink ê°™ì€ ì‹¤ì‹œê°„ í”„ë ˆì„ì›Œí¬ ë“±ì¥
```

---

## ğŸ—ï¸ Part 3: ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ ì›ì¹™

### 3.1 ì•„í‚¤í…ì²˜ ì •ì˜

> **ì•„í‚¤í…ì²˜**: "ë‚˜ì¤‘ì— ë³€ê²½í•˜ê¸° ì–´ë ¤ìš´ ê²°ì •ë“¤ì˜ ì§‘í•©"

**ì‹¤ë¬´ ì˜ˆì‹œ:**
```
ë³€ê²½ ì‰¬ìš´ ê²ƒ (éì•„í‚¤í…ì²˜):
- ì„¸ìœ¨ ë³€ê²½: 1ë¶„

ë³€ê²½ ì–´ë ¤ìš´ ê²ƒ (ì•„í‚¤í…ì²˜):
- ëª¨ë†€ë¦¬ìŠ¤ vs ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤: 6ê°œì›”
- SQL vs NoSQL: 3ê°œì›”
- ë™ê¸° vs ë¹„ë™ê¸° í†µì‹ : 2ê°œì›”
- ë‹¨ì¼ ë¦¬ì „ vs ë©€í‹° ë¦¬ì „: 1ë…„
```

### 3.2 í’ˆì§ˆ ì†ì„± (Quality Attributes)

#### ì„±ëŠ¥ (Performance)
```python
# ë‚˜ìœ ì˜ˆ: ë§‰ì—°í•œ ìš”êµ¬ì‚¬í•­
"ë¹¨ë¼ì•¼ í•œë‹¤"

# ì¢‹ì€ ì˜ˆ: ì¸¡ì • ê°€ëŠ¥í•œ ìš”êµ¬ì‚¬í•­
performance_requirements = {
    "í‰ê·  ì‘ë‹µ ì‹œê°„": "< 100ms",
    "95 percentile": "< 200ms",
    "99 percentile": "< 500ms", 
    "ì²˜ë¦¬ëŸ‰": "> 10,000 req/sec"
}
```

#### ê°€ìš©ì„± (Availability)
```
99%: ì—°ê°„ 3.65ì¼ ë‹¤ìš´ (ìŠ¤íƒ€íŠ¸ì—… ì´ˆê¸°)
99.9%: ì—°ê°„ 8.77ì‹œê°„ ë‹¤ìš´ (ì¼ë°˜ ì„œë¹„ìŠ¤)
99.99%: ì—°ê°„ 52.6ë¶„ ë‹¤ìš´ (ì¤‘ìš” ì„œë¹„ìŠ¤)
99.999%: ì—°ê°„ 5.26ë¶„ ë‹¤ìš´ (ê¸ˆìœµ, ì˜ë£Œ)

ì£¼ì˜: ê° ë ˆë²¨ ë‹¬ì„± ë¹„ìš©ì€ ê¸°í•˜ê¸‰ìˆ˜ì  ì¦ê°€!
```

#### í™•ì¥ì„± (Scalability)
```
ìˆ˜ì§ í™•ì¥ (Vertical): ë” ê°•í•œ ì„œë²„ë¡œ êµì²´
- ì¥ì : êµ¬í˜„ ê°„ë‹¨
- ë‹¨ì : ë¬¼ë¦¬ì  í•œê³„, ë¹„ìš© ê¸‰ì¦

ìˆ˜í‰ í™•ì¥ (Horizontal): ì„œë²„ ëŒ€ìˆ˜ ì¦ê°€
- ì¥ì : ì´ë¡ ìƒ ë¬´í•œ í™•ì¥
- ë‹¨ì : ë³µì¡ë„ ì¦ê°€ (ë¶„ì‚° ì‹œìŠ¤í…œ í•„ìš”)
```

### 3.3 íŠ¸ë ˆì´ë“œì˜¤í”„ ì‚¬ë¡€

#### ì¼ê´€ì„± vs ê°€ìš©ì„± (CAP ì •ë¦¬)
```python
# ê°•í•œ ì¼ê´€ì„± (Strong Consistency)
class BankTransfer:
    def transfer(self, from_account, to_account, amount):
        # ëª¨ë“  ë…¸ë“œ ë™ì˜í•  ë•Œê¹Œì§€ ëŒ€ê¸°
        # ì¥ì : ì”ì•¡ í•­ìƒ ì •í™•
        # ë‹¨ì : ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì‹œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
        with distributed_transaction():
            from_account.balance -= amount
            to_account.balance += amount

# ìµœì¢… ì¼ê´€ì„± (Eventual Consistency)  
class SocialMediaLike:
    def like_post(self, post_id, user_id):
        # ì¼ë‹¨ ë¹ ë¥´ê²Œ ì‘ë‹µ, ë‚˜ì¤‘ì— ë™ê¸°í™”
        # ì¥ì : í•­ìƒ ë¹ ë¦„, í•­ìƒ ê°€ìš©
        # ë‹¨ì : ì¼ì‹œì ìœ¼ë¡œ ì¢‹ì•„ìš” ìˆ˜ ë¶€ì •í™• ê°€ëŠ¥
        local_db.increment_likes(post_id)
        async_sync_to_other_nodes(post_id)
```

#### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ vs ëª¨ë†€ë¦¬ìŠ¤
```
ëª¨ë†€ë¦¬ìŠ¤:
âœ… ë°°í¬ ê°„ë‹¨, íŠ¸ëœì­ì…˜ ì‰¬ì›€, ë””ë²„ê¹… ìš©ì´
âŒ í™•ì¥ ì–´ë ¤ì›€, ë°°í¬ ìœ„í—˜ (í•˜ë‚˜ ë²„ê·¸ = ì „ì²´ ì¤‘ë‹¨)

ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤:
âœ… ë…ë¦½ ë°°í¬, ì„ íƒì  í™•ì¥, ê¸°ìˆ  ìŠ¤íƒ ììœ 
âŒ ë¶„ì‚° íŠ¸ëœì­ì…˜ ë³µì¡, ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œ, ë””ë²„ê¹… ì–´ë ¤ì›€

ì •ë‹µ: íšŒì‚¬ ê·œëª¨ì™€ íŒ€ êµ¬ì¡°ì— ë”°ë¼ ë‹¤ë¦„
```

---

## ğŸ§µ Part 4: ë³‘í–‰ì„± (Concurrency) ê´€ë¦¬

### 4.1 ìŠ¤ë ˆë“œ í•„ìš”ì„±

**ë¬¸ì œ ìƒí™©:**
```python
# ë‹¨ì¼ ìŠ¤ë ˆë“œ ì„œë²„ (ë”ì°í•œ ì„±ëŠ¥)
while True:
    client = server.accept()  # ì—°ê²° ëŒ€ê¸°
    data = client.recv(1MB)           # 1ì´ˆ
    result = process_data(data)       # 10ì´ˆ  
    db.save(result)                   # 2ì´ˆ
    client.send(result)               # 1ì´ˆ
    # ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ëŠ” 14ì´ˆ ëŒ€ê¸°!
    
# ì²˜ë¦¬ëŸ‰: ì•½ 4 req/min
```

**í•´ê²°ì±…:**
```python
# ë©€í‹°ìŠ¤ë ˆë“œ ì„œë²„
def handle_client(client):
    data = client.recv(1MB)
    result = process_data(data)
    db.save(result) 
    client.send(result)

while True:
    client = server.accept()
    threading.Thread(target=handle_client, args=(client,)).start()
    
# ì²˜ë¦¬ëŸ‰: ìˆ˜ì²œ req/min (ë™ì‹œ ì²˜ë¦¬)
```

### 4.2 ë ˆì´ìŠ¤ ì»¨ë””ì…˜ (Race Condition)

**ë²„ê·¸ ìˆ¨ì€ ì½”ë“œ:**
```python
balance = 1000

def withdraw(amount):
    global balance
    # ì´ ì½”ë“œëŠ” ì›ìì (atomic)ì´ì§€ ì•ŠìŒ!
    temp = balance      # 1. ì½ê¸°
    temp = temp - amount  # 2. ê³„ì‚°  
    balance = temp      # 3. ì“°ê¸°

# ë‘ ìŠ¤ë ˆë“œ ë™ì‹œ ì‹¤í–‰
thread1 = Thread(target=withdraw, args=(100,))
thread2 = Thread(target=withdraw, args=(100,))

# ê¸°ëŒ€ê°’: 800, ì‹¤ì œê°’: 900 (100ì› ì¦ë°œ!)
```

**ë°œìƒ ê³¼ì •:**
```
ì‹œê°„    Thread 1              Thread 2              balance
t0                                                   1000
t1      temp1 = 1000
t2                            temp2 = 1000  
t3      temp1 = 900
t4                            temp2 = 900
t5      balance = 900
t6                            balance = 900  â† ë®ì–´ì“°ê¸°!
```

### 4.3 ë™ê¸°í™” í•´ê²°ì±…

#### Mutex (ìƒí˜¸ ë°°ì œ)
```python
import threading

balance = 1000
lock = threading.Lock()

def withdraw(amount):
    global balance
    # ì„ê³„ ì˜ì—­ ë³´í˜¸
    with lock:  # í•œ ë²ˆì— í•˜ë‚˜ ìŠ¤ë ˆë“œë§Œ ì§„ì…
        temp = balance
        temp = temp - amount
        balance = temp
        
# ì´ì œ ì•ˆì „: ê²°ê³¼ í•­ìƒ 800
```

#### ì±„ë„ (Go ìŠ¤íƒ€ì¼)
```go
func worker(jobs <-chan int, results chan<- int) {
    for job := range jobs {
        result := process(job)
        results <- result  // ê²°ê³¼ ì „ì†¡
    }
}

// ê³µìœ  ë©”ëª¨ë¦¬ ì—†ì´ ë©”ì‹œì§€ ì „ë‹¬ë¡œ ë™ê¸°í™”
// "Don't communicate by sharing memory; share memory by communicating"
```

---

## ğŸ“š ì¶”ì²œ ë„ì„œ ë° ìë£Œ

### í•„ìˆ˜ ë„ì„œ
1. **"Designing Data-Intensive Applications"** by Martin Kleppmann
   - ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë°”ì´ë¸”
   - ì‹¤ë¬´ ê´€ì ì˜ ê¹Šì´ ìˆëŠ” ë¶„ì„

2. **"Distributed Systems"** by Maarten van Steen
   - ì´ë¡ ì  ê¸°ì´ˆê°€ íƒ„íƒ„
   - ì•Œê³ ë¦¬ì¦˜ ì¦ëª…ê³¼ ìˆ˜í•™ì  ë°°ê²½

### ì˜¨ë¼ì¸ ê°•ì˜
1. **MIT 6.824 Distributed Systems**: https://pdos.csail.mit.edu/6.824/
2. **Martin Kleppmann's Course**: https://www.youtube.com/playlist?list=PLeKd45zvjcDFUEv_ohr_HdUFe97RItdiB

### í•µì‹¬ ë…¼ë¬¸
1. **MapReduce** (2004): https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf
2. **Raft** (2014): https://raft.github.io/raft.pdf
3. **Bigtable** (2006): Googleì˜ NoSQL ì„¤ê³„

---

## ğŸ’¡ í•µì‹¬ ìš”ì•½

### ë¶„ì‚° ì‹œìŠ¤í…œ 3ëŒ€ ì›ì¹™
1. **í™•ì¥ì„±**: ë¨¸ì‹  ì¶”ê°€ â†’ ì„±ëŠ¥ ì„ í˜• ì¦ê°€
2. **ë‚´ê²°í•¨ì„±**: ì¼ë¶€ ì¥ì•  í•­ìƒ ë°œìƒ ê°€ì •í•˜ê³  ì„¤ê³„  
3. **ì¼ê´€ì„±**: ëª¨ë“  ë…¸ë“œ ë™ì¼ ë°ì´í„° (ë˜ëŠ” ì˜ë„ì  í¬ê¸°)

### íŠ¸ë ˆì´ë“œì˜¤í”„ì˜ í˜„ì‹¤
- ì™„ë²½í•œ ì‹œìŠ¤í…œì€ ì—†ë‹¤
- ëª¨ë“  ì„ íƒì—ëŠ” ëŒ€ê°€ê°€ ë”°ë¥¸ë‹¤
- ì¤‘ìš”í•œ ê²ƒì€ "ì™œ" ì´ ì„ íƒì„ í–ˆëŠ”ì§€ ì„¤ëª… ê°€ëŠ¥í•œê°€



---

## ê´€ë ¨ ë…¸íŠ¸

- [[MIT_6824_ì£¼ë§_í•™ìŠµ_ê°€ì´ë“œ]] - ì£¼ë§ ì§‘ì¤‘ í•™ìŠµ ê³„íš ë° ë¡œë“œë§µ
- [[ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ ì‹¤ìŠµ ê²°ê³¼ ë³´ê³ ì„œ]] - ë¶„ì‚° ì‹œìŠ¤í…œ ì‹¤ë¬´ ì ìš© ì‚¬ë¡€  
- [[Gateway API vs Ingress]] - í˜„ëŒ€ì  ë¶„ì‚° ì‹œìŠ¤í…œ ë„¤íŠ¸ì›Œí‚¹
- [[ëŒ€ê·œëª¨ ì´ë²¤íŠ¸ ë¡œê·¸ ì²˜ë¦¬ ì•„í‚¤í…ì²˜]] - ì‹¤ì „ ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬

---

