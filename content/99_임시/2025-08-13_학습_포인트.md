# TypeScript & NestJS ë””ë²„ê¹… ê°€ì´ë“œ

> ì‹¤ì œ ê°œë°œ ê³¼ì •ì—ì„œ ê²ªì€ ë¬¸ì œì ê³¼ í•´ê²°ì±…ì„ ì •ë¦¬í•œ í•™ìŠµ ë…¸íŠ¸

## ğŸ“‹ ëª©ì°¨

1. [TypeScript êµ¬ë¬¸ ì˜¤ë¥˜](https://claude.ai/chat/bd942a60-746b-47fd-9020-881cc0a3b796#typescript-%EA%B5%AC%EB%AC%B8-%EC%98%A4%EB%A5%98)
2. [TypeORM PostgreSQL ì¼€ì´ìŠ¤ ì„¼ì‹œí‹°ë¸Œ ì´ìŠˆ](https://claude.ai/chat/bd942a60-746b-47fd-9020-881cc0a3b796#typeorm-postgresql-%EC%BC%80%EC%9D%B4%EC%8A%A4-%EC%84%BC%EC%8B%9C%ED%8B%B0%EB%B8%8C-%EC%9D%B4%EC%8A%88)
3. [í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸](https://claude.ai/chat/bd942a60-746b-47fd-9020-881cc0a3b796#%ED%95%B5%EC%8B%AC-%ED%95%99%EC%8A%B5-%ED%8F%AC%EC%9D%B8%ED%8A%B8)

---

## ğŸ”§ TypeScript êµ¬ë¬¸ ì˜¤ë¥˜

### ë¬¸ì œ ìƒí™©

```
Error TS1005: '}' expected.
Line 130, Column 5
```

**ë°œìƒ ì›ì¸**: í´ë˜ìŠ¤ ì„ ì–¸ ë§ˆì§€ë§‰ì— ë‹«ëŠ” ì¤‘ê´„í˜¸ `}` ëˆ„ë½

### ì›ë³¸ ì½”ë“œ ë¬¸ì œì 

```typescript
@Injectable()
export class DatabaseRepository {
  // ... í´ë˜ìŠ¤ ë‚´ìš©ë“¤ ...
  
  async findLatestTrafficForAllLinks(): Promise<TrafficData[]> {
    // ... ë©”ì„œë“œ êµ¬í˜„ ...
  }
  // âŒ ì—¬ê¸°ì„œ í´ë˜ìŠ¤ê°€ ëë‚¬ëŠ”ë° ë‹«ëŠ” ì¤‘ê´„í˜¸ê°€ ì—†ìŒ!
```

### í•´ê²° ë°©ë²•

```typescript
@Injectable()
export class DatabaseRepository {
  // ... í´ë˜ìŠ¤ ë‚´ìš©ë“¤ ...
  
  async findLatestTrafficForAllLinks(): Promise<TrafficData[]> {
    // ... ë©”ì„œë“œ êµ¬í˜„ ...
  }
} // âœ… í´ë˜ìŠ¤ ë‹«ëŠ” ì¤‘ê´„í˜¸ ì¶”ê°€
```

### ğŸ¯ í•™ìŠµ í¬ì¸íŠ¸

- **êµ¬ë¬¸ ê²€ì‚¬ì˜ ì¤‘ìš”ì„±**: TypeScript ì»´íŒŒì¼ëŸ¬ëŠ” êµ¬ë¬¸ì´ ì™„ì „í•˜ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ì„ ê±°ë¶€
- **IDE ë„ì›€ í™œìš©**: VS Code ë“± ì—ë””í„°ì˜ ì¤‘ê´„í˜¸ ë§¤ì¹­ ê¸°ëŠ¥ í™œìš©
- **ì½”ë“œ í¬ë§¤í„° ì‚¬ìš©**: Prettier ê°™ì€ ë„êµ¬ë¡œ ì¼ê´€ëœ ì½”ë“œ ìŠ¤íƒ€ì¼ ìœ ì§€

---

## ğŸ˜ TypeORM PostgreSQL ì¼€ì´ìŠ¤ ì„¼ì‹œí‹°ë¸Œ ì´ìŠˆ

### ë¬¸ì œ ìƒí™©

```
QueryFailedError: column latest_td.maxcollectedat does not exist
Hint: Perhaps you meant to reference the column "latest_td.maxCollectedAt".
```

**ë°œìƒ ì›ì¸**: PostgreSQLì˜ ì¼€ì´ìŠ¤ ì„¼ì‹œí‹°ë¸Œ íŠ¹ì„±ê³¼ TypeORM ì¿¼ë¦¬ ë¹Œë” ê°„ì˜ ë¶ˆì¼ì¹˜

### ë¬¸ì œ ì½”ë“œ ë¶„ì„

```typescript
// âŒ ë¬¸ì œê°€ ëœ ì½”ë“œ
(subQuery: SelectQueryBuilder<any>) => {
  return subQuery
    .select(`"rawData"->>'link_id'`, 'link_id')
    .addSelect('MAX("collectedAt")', 'maxCollectedAt') // camelCase ì‚¬ìš©
    .from(TrafficData, 'td_sub')
    .groupBy(`"rawData"->>'link_id'`);
},
'latest_td',
// JOIN ì¡°ê±´ì—ì„œ maxCollectedAtì„ ì°¸ì¡°í–ˆì§€ë§Œ PostgreSQLì€ maxcollectedatìœ¼ë¡œ ì¸ì‹
`td."rawData"->>'link_id' = latest_td.link_id AND "td"."collectedAt" = latest_td.maxCollectedAt`
```

### ì‹¤ì œ ìƒì„±ëœ SQL ì¿¼ë¦¬

```sql
SELECT "td"."id" AS "td_id", 
       "td"."collectedAt" AS "td_collectedAt", 
       "td"."rawData" AS "td_rawData" 
FROM "traffic_data" "td" 
INNER JOIN (
    SELECT "rawData"->>'link_id' AS "link_id", 
           MAX("collectedAt") AS "maxCollectedAt" 
    FROM "traffic_data" "td_sub" 
    GROUP BY "rawData"->>'link_id"
) "latest_td" 
ON td."rawData"->>'link_id' = latest_td.link_id 
AND "td"."collectedAt" = latest_td.maxCollectedAt
-- âŒ PostgreSQLì´ maxCollectedAtì„ maxcollectedatìœ¼ë¡œ ë³€í™˜í•¨
```

### í•´ê²° ë°©ë²•

```typescript
// âœ… í•´ê²°ëœ ì½”ë“œ
(subQuery: SelectQueryBuilder<any>) => {
  return subQuery
    .select(`"rawData"->>'link_id'`, 'link_id')
    .addSelect('MAX("collectedAt")', 'max_collected_at') // snake_case ì‚¬ìš©
    .from(TrafficData, 'td_sub')
    .groupBy(`"rawData"->>'link_id'`);
},
'latest_td',
// JOIN ì¡°ê±´ë„ snake_caseë¡œ ì¼ì¹˜ì‹œí‚´
`td."rawData"->>'link_id' = latest_td.link_id AND "td"."collectedAt" = latest_td.max_collected_at`
```

### ğŸ¯ í•™ìŠµ í¬ì¸íŠ¸

- **PostgreSQL ì¼€ì´ìŠ¤ ê·œì¹™**: ë”°ì˜´í‘œë¡œ ê°ì‹¸ì§€ ì•Šì€ ì‹ë³„ìëŠ” ìë™ìœ¼ë¡œ ì†Œë¬¸ìë¡œ ë³€í™˜
- **ì¼ê´€ëœ ë„¤ì´ë°**: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” snake_caseê°€ ë” ì•ˆì „í•œ ì„ íƒ
- **TypeORM ì¿¼ë¦¬ ë¹Œë”**: ë³µì¡í•œ ì¿¼ë¦¬ì—ì„œ alias ë„¤ì´ë°ì— ì£¼ì˜ í•„ìš”

---

## ğŸ’¡ í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸

### 1. ë””ë²„ê¹… í”„ë¡œì„¸ìŠ¤

#### ë‹¨ê³„ë³„ ì ‘ê·¼ë²•

1. **ì—ëŸ¬ ë©”ì‹œì§€ ì •í™•íˆ ì½ê¸°**
    
    - ì¤„ ë²ˆí˜¸ì™€ ì»¬ëŸ¼ ì •ë³´ í™•ì¸
    - ì—ëŸ¬ íƒ€ì… ë¶„ì„ (êµ¬ë¬¸ ì˜¤ë¥˜ vs ëŸ°íƒ€ì„ ì˜¤ë¥˜)
2. **ë¬¸ì œ ì˜ì—­ íŠ¹ì •í•˜ê¸°**
    
    - TypeScript ì»´íŒŒì¼ íƒ€ì„ vs ëŸ°íƒ€ì„ êµ¬ë¶„
    - ë¡œì»¬ í™˜ê²½ vs ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì´ìŠˆ êµ¬ë¶„
3. **ê·¼ë³¸ ì›ì¸ íŒŒì•…**
    
    - í‘œë©´ì  ì¦ìƒì´ ì•„ë‹Œ ì‹¤ì œ ì›ì¸ ì°¾ê¸°
    - ê´€ë ¨ ë¬¸ì„œë‚˜ ìŠ¤í™ í™•ì¸

### 2. ì˜ˆë°© ì „ëµ

#### ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬

```typescript
// âœ… ì¢‹ì€ ìŠµê´€ë“¤
- ì¼ê´€ëœ ë„¤ì´ë° ì»¨ë²¤ì…˜ (camelCase vs snake_case)
- TypeScript strict ëª¨ë“œ í™œìš©
- ESLint, Prettier ë“± ë„êµ¬ í™œìš©
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œ ì¿¼ë¦¬ ê²€ì¦
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ì‹œ ì£¼ì˜ì‚¬í•­

```typescript
// âœ… PostgreSQLê³¼ TypeORM ì‚¬ìš©ì‹œ ê¶Œì¥ì‚¬í•­
- ë³µì¡í•œ ì¿¼ë¦¬ëŠ” ë¨¼ì € ìˆœìˆ˜ SQLë¡œ í…ŒìŠ¤íŠ¸
- aliasëŠ” snake_case ì‚¬ìš©
- ì¿¼ë¦¬ ë¹Œë”ë³´ë‹¤ Raw SQLì´ ëª…í™•í•  ë•ŒëŠ” ê³¼ê°íˆ ì‚¬ìš©
```

### 3. ë„êµ¬ í™œìš©

#### ê°œë°œ í™˜ê²½ ìµœì í™”

- **VS Code Extensions**
    
    - TypeScript Importer
    - Bracket Pair Colorizer
    - PostgreSQL syntax highlighting
- **ë””ë²„ê¹… ë„êµ¬**
    
    - TypeORM ë¡œê¹… í™œì„±í™” (`logging: true`)
    - PostgreSQL ì¿¼ë¦¬ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
    - NestJS ë””ë²„ê¹… ëª¨ë“œ í™œìš©

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ

- [TypeORM Query Builder](https://typeorm.io/select-query-builder)
- [PostgreSQL Identifiers](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)
- [NestJS Database Integration](https://docs.nestjs.com/techniques/database)

### ì¶”ê°€ í•™ìŠµ ê¶Œì¥ì‚¬í•­

- PostgreSQL ë„¤ì´ë° ì»¨ë²¤ì…˜ ê°€ì´ë“œ
- TypeORM ê³ ê¸‰ ì¿¼ë¦¬ íŒ¨í„´
- NestJS ì—ëŸ¬ í•¸ë“¤ë§ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

---

## ğŸ”– íƒœê·¸

#TypeScript #NestJS #TypeORM #PostgreSQL #ë””ë²„ê¹… #ì¿¼ë¦¬ìµœì í™”`